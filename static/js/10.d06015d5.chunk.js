(this["webpackJsonpshockwallet-web"]=this["webpackJsonpshockwallet-web"]||[]).push([[10],{113:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var a=n(17),r=n(2),c=n.n(r),o=n(6),i=n(3),s=n(8),u=n(163),l=n.n(u),f=function(){var e=Object(o.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,l.a._init){e.next=4;break}return e.next=4,new Promise((function(e,t){l.a.init("ShockWalletStore").then((function(){return console.log("File cache initialized!"),l.a.persist()})).then((function(n){n.persistent?e(n):t(n)}))}));case 4:return e.next=6,l.a.load(t);case 6:return n=e.sent,e.abrupt("return",n.createURL());case 10:return e.prev=10,e.t0=e.catch(0),console.warn(e.t0),e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),p=function(e,t){var n=document.querySelectorAll(t);return n&&n.length&&n.forEach((function(t){t.src=e,t.muted=!0,t.autoplay=!0})),!!n&&!!n.length},d=function(e,t){return l.a.save(e,t)},m=function(e){var t=Promise.resolve();return e.forEach((function(e){t=t.then((function(){return e()}))})),t},b={"video/embedded":{formats:["mp4","webm"],element:"video",options:{autoplay:!0,muted:!0}},"image/embedded":{formats:["jpg","png","webp","jpeg"],element:"img",options:{}}},v=function(e){var t,n,a=null===(t=e.name)||void 0===t||null===(n=t.split("."))||void 0===n?void 0:n.slice(-1)[0],r=Object.entries(b).filter((function(e){var t=Object(s.a)(e,2);t[0];return t[1].formats.includes(a)})),c=Object(s.a)(r,1)[0];if(c){var o=Object(s.a)(c,2),u=o[0],l=o[1];return Object(i.a)({name:u},l)}return null},O=null,j=function(){var e=Object(o.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(O){e.next=5;break}return e.next=3,Promise.all([n.e(6),n.e(8)]).then(n.t.bind(null,537,7));case 3:t=e.sent,O=new t.default;case 5:return e.abrupt("return",O);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=Object(o.a)(c.a.mark((function e(){var t,n,r,i,u=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:[],n=!(u.length>1&&void 0!==u[1])||u[1],e.next=4,Promise.all(t.map(function(){var e=Object(o.a)(c.a.mark((function e(t){var a,r,i,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.contentItems,r=t.id,i=Object.entries(a).filter((function(e){var t=Object(s.a)(e,2)[1];return b[t.type]}))){e.next=4;break}return e.abrupt("return",[]);case 4:return e.next=6,j();case 6:return u=e.sent,e.abrupt("return",i.map((function(e){var t=Object(s.a)(e,2),a=t[0],i=t[1];return function(){return new Promise((function(e){u.get(i.magnetURI)?e(!0):u.add(i.magnetURI,function(){var t=Object(o.a)(c.a.mark((function t(l){var m;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e(!0),(m=l.files.filter((function(e){var t,n,a=null===(t=e.name)||void 0===t||null===(n=t.split("."))||void 0===n?void 0:n.slice(-1)[0],r=Object.entries(b).filter((function(e){return Object(s.a)(e,2)[1].formats.includes(a)}))[0];return!!r&&Object(s.a)(r,2)[1].formats.includes(a)}))).map(function(){var e=Object(o.a)(c.a.mark((function e(t){var o,l,d,m,b,O,j;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=v(t)){e.next=3;break}return e.abrupt("return");case 3:return l="".concat(r,"-").concat(a,"-").concat(t.name),d=o.element,m="".concat(d,'[data-torrent="').concat(i.magnetURI,'"]'),e.next=8,f(l);case 8:if(!(b=e.sent)){e.next=14;break}return(O=u.get(i.magnetURI))&&O.destroy(),p(b,m),e.abrupt("return");case 14:j=document.querySelectorAll(m),console.log("Torrent Elements:",j),j.forEach((function(e){var a=decodeURIComponent(i.magnetURI.replace(/.*(ws=)/gi,"")),r=o.formats.filter((function(e){return a.toLowerCase().endsWith(".".concat(e.toLowerCase()))})),c=Object(s.a)(r,1)[0];!n&&c?e.setAttribute("src",a):t.renderTo(e,o.options)}));case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),l.on("done",(function(){m.map((function(e){var t=v(e),n="".concat(r,"-").concat(a,"-").concat(e.name),s=t.element,u="".concat(s,'[data-torrent="').concat(i.magnetURI,'"]');e.getBlob(function(){var e=Object(o.a)(c.a.mark((function e(t,a){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=3;break}return console.warn(t),e.abrupt("return");case 3:return console.log("Caching loaded file...",n,a),e.next=6,d(n,a);case 6:if("false"!==document.querySelector(u).dataset.played){e.next=12;break}return e.next=10,f(n);case 10:r=e.sent,p(r,u);case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())}))}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}))}})));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 4:r=e.sent,i=r.reduce((function(e,t){return[].concat(Object(a.a)(e),Object(a.a)(t))}),[]),m(i);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},115:function(e,t,n){e.exports=n.p+"static/media/av1.48bf5c6a.jpg"},129:function(e,t,n){"use strict";var a=n(8),r=n(0),c=n(32),o=n(114),i=n.n(o),s=n(1);t.a=function(e){var t=Object(c.b)(),n=Object(c.c)((function(e){return e.user.profile})),o=Object(r.useState)(!1),u=Object(a.a)(o,2),l=u[0],f=u[1],p=Object(r.useState)(!1),d=Object(a.a)(p,2),m=d[0],b=d[1],v=Object(r.useState)(!1),O=Object(a.a)(v,2),j=O[0],g=O[1],h=Object(r.useState)(!1),k=Object(a.a)(h,2),E=k[0],y=k[1],x=Object(r.useState)(),w=Object(a.a)(x,2),N=w[0],P=w[1],S=Object(r.useCallback)((function(){var e=i.a.utc().subtract(1,"minutes"),t=i.a.utc(m).isSameOrAfter(e),n=i.a.utc(l).isSameOrAfter(e);y(t),g(n)}),[l,m]);return Object(r.useEffect)((function(){N&&clearTimeout(N),S();var e=setTimeout((function(){S()}),3e4);return P(e),function(){return clearTimeout(N)}}),[n,S]),Object(r.useEffect)((function(){var t=Object(s.h)({path:"Profile/lastSeenApp",gunPointer:Object(s.g)(e),callback:function(e){f(e)}}),n=Object(s.h)({path:"Profile/lastSeenNode",gunPointer:Object(s.g)(e),callback:function(e){b(e)}});return function(){t.off(),n.off()}}),[t,e]),{isOnlineApp:j,isOnlineNode:E}}},130:function(e,t,n){"use strict";var a=n(0),r=n.n(a),c=n(32),o=n(16),i=n(33),s=(n(131),r.a.lazy((function(){return Promise.all([n.e(2),n.e(9),n.e(14)]).then(n.bind(null,271))})));t.a=function(e){var t=Object(c.b)(),n=Object(c.c)((function(e){return e.tip.modalOpen})),u=Object(a.useCallback)((function(){t(Object(o.b)())}),[t]),l=Object(a.useMemo)((function(){return r.a.createElement(i.a,{text:"Loading..."})}),[]);return n?r.a.createElement("div",{className:"modal-container"},r.a.createElement("div",{className:"modal-overlay",onClick:u}),r.a.createElement("div",{className:"modal-content"},r.a.createElement(a.Suspense,{fallback:l},r.a.createElement(s,e)))):null}},131:function(e,t,n){},278:function(e,t,n){},279:function(e,t,n){e.exports=n.p+"static/media/banner-bg.f59337b5.jpg"},280:function(e,t,n){e.exports=n.p+"static/media/lightning-logo.ea3bd789.svg"},281:function(e,t,n){},539:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n.n(a),c=n(6),o=n(8),i=n(0),s=n.n(i),u=n(32),l=n(5),f=n(112),p=n(13),d=n(16),m=n(129),b=n(1),v=(n(113),n(33)),O=(n(278),function(e){var t=e.text;return s.a.createElement("div",{className:"divider-container"},s.a.createElement("div",{className:"dash"}),s.a.createElement("p",{className:"divider-text"},t),s.a.createElement("div",{className:"dash"}))}),j=n(130),g=n(279),h=n.n(g),k=n(115),E=n.n(k),y=n(280),x=n.n(y),w=(n(281),s.a.lazy((function(){return Promise.all([n.e(0),n.e(1)]).then(n.bind(null,276))}))),N=s.a.lazy((function(){return Promise.all([n.e(0),n.e(1),n.e(12)]).then(n.bind(null,534))}));t.default=function(){var e,t=Object(u.b)(),n=Object(l.h)(),a=n.userId,g=Object(u.c)((function(e){return e.user.wall})),k=Object(u.c)((function(e){return e.user.profile})),y=Object(m.a)(a),P=y.isOnlineApp,S=y.isOnlineNode,I=Object(i.useState)(!0),C=Object(o.a)(I,2),A=(C[0],C[1]),L=Object(i.useState)(!0),R=Object(o.a)(L,2),U=R[0],T=R[1],K=Object(i.useCallback)(Object(c.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,A(!0),t(Object(p.i)()),e.next=5,t(Object(p.g)(a));case 5:A(!1),t(Object(p.e)(a)),t(Object(p.d)(a)),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0),A(!1);case 14:case"end":return e.stop()}}),e,null,[[0,10]])}))),[t,a]),z=Object(i.useCallback)(Object(c.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("Setting Loading status to:",!0),T(!0),t(Object(p.j)()),e.next=6,t(Object(p.h)(a));case 6:console.log("Setting Loading status to:",!1),T(!1),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0),console.log("Setting Loading status to:",!1),T(!1);case 15:case"end":return e.stop()}}),e,null,[[0,10]])}))),[t,a]),q=Object(i.useCallback)((function(){t(Object(d.c)({targetType:"spontaneousPayment"}))}),[t]),B=Object(i.useCallback)(Object(c.a)(r.a.mark((function e(){var a,c,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.postId,c=n.userId,o=n.type,e.next=3,K();case 3:z(),t(Object(p.c)({postId:a,publicKey:c,type:o}));case 5:case"end":return e.stop()}}),e)}))),[t,K,z,n]);Object(i.useEffect)((function(){B();var e=Object(b.h)({path:"Profile/displayName",gunPointer:Object(b.g)(a),callback:function(e){t(Object(p.k)({displayName:e}))}}),n=Object(b.h)({path:"Profile/bio",gunPointer:Object(b.g)(a),callback:function(e){t(Object(p.k)({bio:e}))}});return function(){e.off(),n.off()}}),[t,B,a]);var M=null!==(e=k.displayName)&&void 0!==e?e:k.alias,W=Object(i.useCallback)((function(e){if(e){var t,n,r=k.avatar?"data:image/png;base64,".concat(k.avatar):E.a;if("shared"===e.type)return s.a.createElement(i.Suspense,{fallback:s.a.createElement("div",{className:"post-loading"},s.a.createElement(v.a,{text:"Loading Post..."})),key:e.id},s.a.createElement(N,{postID:e.id,postPublicKey:e.originalAuthor,sharedPostId:e.id,sharedTimestamp:e.date,sharerAvatar:r,sharerPublicKey:a,sharerUsername:M,isOnlineNode:S,pinned:e.pinned}));if("post"===e.type)return s.a.createElement(i.Suspense,{fallback:s.a.createElement("div",{className:"post-loading"},s.a.createElement(v.a,{text:"Loading Post..."})),key:e.id},s.a.createElement(w,{timestamp:e.date,contentItems:e.contentItems,username:M,avatar:r,publicKey:a,page:e.page,id:e.id,tipValue:null!==(t=e.tipValue)&&void 0!==t?t:0,tipCounter:null!==(n=e.tipCounter)&&void 0!==n?n:0,isOnlineNode:S,pinned:e.pinned,post:e}))}}),[S,k.avatar,a,M]);return s.a.createElement("div",{className:"user-page"},s.a.createElement("div",{className:"top-banner",style:{backgroundImage:"url(".concat(k.header?"data:image/png;base64,".concat(k.header):h.a,")")}}),s.a.createElement("div",{className:"user-details"},s.a.createElement("div",{className:"main-av",style:{backgroundImage:"url(".concat(k.avatar?"data:image/png;base64,".concat(k.avatar):E.a,")")}}),s.a.createElement("div",{className:"details"},s.a.createElement("div",{className:"user-info"},s.a.createElement("p",{className:"username"},M),s.a.createElement("div",{className:"activity"},s.a.createElement("p",{className:"status",style:{color:P?"#01a33d":S?"#f2a900":"#888"}},P?"Active Recently":S?"Node Online":"Node Offline")),k.bio?s.a.createElement("div",{className:"desc"},s.a.createElement("p",{className:"title"},"Bio"),s.a.createElement("p",null,k.bio)):null),s.a.createElement("div",{className:"send-tip-btn",onClick:q,style:{opacity:S?1:.5,cursor:S?"pointer":"default"},"data-tip":S?null:"You can only tip users with online nodes"},s.a.createElement("img",{src:x.a,alt:"Bitcoin Lightning"}),s.a.createElement("p",null,"Send Tip")),s.a.createElement(f.a,{backgroundColor:"#3a4d67",effect:"solid"}))),s.a.createElement("div",{className:"tabs-holder"},s.a.createElement("p",{className:"tab active"},"Feed")),s.a.createElement("div",{className:"posts-holder"},W(g.pinnedPost),g.pinnedPost&&s.a.createElement(O,{text:"More Posts"}),g.posts.map(W)),U?s.a.createElement(v.a,{text:"Loading ".concat(g.page>=0?"More":"Wall"," Posts...")}):null,s.a.createElement(j.a,{publicKey:a}))}}}]);
//# sourceMappingURL=10.d06015d5.chunk.js.map