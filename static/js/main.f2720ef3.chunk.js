(this["webpackJsonpshockwallet-web"]=this["webpackJsonpshockwallet-web"]||[]).push([[4],{1:function(e,t,n){"use strict";n.d(t,"c",(function(){return v})),n.d(t,"f",(function(){return P})),n.d(t,"i",(function(){return _})),n.d(t,"h",(function(){return y})),n.d(t,"e",(function(){return w})),n.d(t,"d",(function(){return L})),n.d(t,"g",(function(){return E})),n.d(t,"a",(function(){return j})),n.d(t,"b",(function(){return A}));var r=n(2),a=n(3),o=n.n(a),c=n(6),u=n(43),i=n(8),s=n(44),l=n.n(s),p=(n(18),n(25)),d=function(e){try{return JSON.parse(e)}catch(t){return null}}(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).PEERS),f=d||["https://gun.shock.network/gun","https://gun-eu.shock.network/gun"],O=function(e){return new Promise((function(t,n){setTimeout((function(){t(!0)}),e)}))},b=function(e){for(var t="",n=function(){var e=Math.floor(62*Math.random());return e<10?e:e<36?String.fromCharCode(e+55):String.fromCharCode(e+61)};t.length<e;)t+=n();return t},g=function(e){var t=Object(i.a)(e,2),n=t[0];return t[1]&&"_"!==n&&"#"!==n},m=function e(t){try{if(console.log("Incomplete Gun Response Check:",typeof t,t),null===t||void 0===t)return!0;if(Array.isArray(t))return!t.length||t.reduce((function(t,n){return t||e(n)}));if("object"===typeof t){if(!t||"number"===typeof t.err)return!0;var n=JSON.stringify(t);if(console.log(t,n),"{}"===n)return!0;var r=Object.entries(t).filter(g);if(console.log(r,null===r||void 0===r?void 0:r.length),!(null===r||void 0===r?void 0:r.length))return!0}return!1}catch(a){return console.warn("An error has occurred:",a),!0}},h=function(e){var t,n=e.path,r=e.gunPointer,a=void 0===r?v:r,o=Object(u.a)(n.split("/"));try{for(o.s();!(t=o.n()).done;){var c=t.value;a=a.get(c)}}catch(i){o.e(i)}finally{o.f()}return a},v=l()({peers:f});window.gun=v;var P=function e(t){var n=t.path,r=void 0===n?"":n,a=t.retryDelay,u=void 0===a?500:a,i=t.retryLimit,s=void 0===i?3:i,l=t.retryCondition,d=void 0===l?m:l,f=t.gunPointer,b=void 0===f?v:f,g=t.method,P=void 0===g?"once":g,_=t._retryCount,y=void 0===_?0:_,w=t._fallbackResult;return new Promise((function(t){var n=Object(p.a)()?1:s,a=Object(p.a)()?200:u;if(y>n)t(w);else{y>0&&console.log("Retrying event:",r,"".concat(y,"/").concat(n));var i=h({path:r,gunPointer:b});console.log("Fetching Path:",r,i),i[P](function(){var u=Object(c.a)(o.a.mark((function c(u){var i;return o.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(console.log(r+" Response:",u),!d||!d(u)){o.next=9;break}return o.next=4,O(a);case 4:return o.next=6,e({path:r,retryDelay:a,retryLimit:n,retryCondition:d,gunPointer:b,_retryCount:y+1,_fallbackResult:u});case 6:return i=o.sent,t(i),o.abrupt("return");case 9:t(u);case 10:case"end":return o.stop()}}),c)})));return function(e){return u.apply(this,arguments)}}())}}))},_=function(e){var t=e.path,n=void 0===t?"":t,r=e.data,a=void 0===r?{}:r,o=e.gunPointer,c=void 0===o?v:o;return new Promise((function(e,t){var r=h({path:n,gunPointer:c}).set(a,(function(t){console.log(a),e(r)}))}))},y=function(e){var t=e.path,n=void 0===t?"":t,r=e.gunPointer,a=void 0===r?v:r,o=e.callback;return h({path:n,gunPointer:a}).on((function(e){o(e)}))},w=function(){return new Promise((function(e,t){var n=b(10),a=b(10);v.user().create(n,a,(function(o){if(o.err)return console.error("An error has occurred while initializing a new user"),void t({field:"gundb",message:"An error has occurred while initializing a new user",_error:o.err,_event:o});e(Object(r.a)({},o,{alias:n,pass:a}))}))}))},L=function(e,t){return new Promise((function(n,r){v.user().auth(e,t,(function(e){n(e)}))}))},E=function(e){if(console.log("Getting Gun User:",e),!e)throw new Error("Undefined public key");return v.user(e)},j="$$_SHOCKWALLET__ENCRYPTED__",A="$$__SHOCKWALLET__MSG__"},12:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"c",(function(){return p})),n.d(t,"d",(function(){return d})),n.d(t,"e",(function(){return O})),n.d(t,"h",(function(){return m})),n.d(t,"g",(function(){return h})),n.d(t,"f",(function(){return _})),n.d(t,"b",(function(){return y})),n.d(t,"k",(function(){return w})),n.d(t,"l",(function(){return L})),n.d(t,"j",(function(){return E})),n.d(t,"i",(function(){return j}));var r=n(2),a=n(3),o=n.n(a),c=n(6),u=n(8),i=n(1),s={LOAD_USER_WALL:"wall/load",LOAD_USER_WALL_TOTAL_PAGES:"wall/loadTotalPages",RESET_USER_WALL:"wall/reset",PIN_WALL_POST:"wall/pin",UPDATE_WALL_POST:"wall/post/update",LOAD_WALL_POST_INFO:"post/info/load",LOAD_WALL_POST_CONTENT:"post/contentItems/load",LOAD_WALL_POST_CONTENT_LENGTH:"post/contentItems/allocate",RESET_USER_DATA:"user/reset",LOAD_USER_DATA:"user/load",LOAD_USER_AVATAR:"avatar/load",UPDATE_USER_PROFILE:"user/update"},l=function(e){var t=Object(u.a)(e,2),n=t[0];return t[1]&&"_"!==n&&"#"!==n},p=function(e){return function(){var t=Object(c.a)(o.a.mark((function t(n){var r,a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=i.c.user(e),t.next=3,Object(i.f)({path:"profileBinary/avatar",gunPointer:r});case 3:return a=t.sent,n({type:s.UPDATE_USER_PROFILE,data:{avatar:a}}),t.abrupt("return",a);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},d=function(e){return function(){var t=Object(c.a)(o.a.mark((function t(n){var r,a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=i.c.user(e),t.next=3,Object(i.f)({path:"profileBinary/header",gunPointer:r});case 3:return a=t.sent,n({type:s.UPDATE_USER_PROFILE,data:{header:a}}),t.abrupt("return",a);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},f=function(){var e=Object(c.a)(o.a.mark((function e(t){var n,r,a,c,s,l,p,d,f,O,b,g,m;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.publicKey,r=t.includeAvatar,a=void 0!==r&&r,c=i.c.user(n),e.next=4,Promise.all([Object(i.f)({path:"Profile/bio",gunPointer:c}),Object(i.f)({path:"Profile/displayName",gunPointer:c}),Object(i.f)({path:"alias",gunPointer:c}),Object(i.f)({path:"Profile/lastSeenApp",gunPointer:c}),Object(i.f)({path:"Profile/lastSeenNode",gunPointer:c}),a?Object(i.f)({path:"profileBinary/avatar",gunPointer:c}):void 0]);case 4:return s=e.sent,l=Object(u.a)(s,6),p=l[0],d=l[1],f=l[2],O=l[3],b=l[4],g=l[5],m={publicKey:n,bio:p,displayName:d,alias:f,lastSeenNode:b,lastSeenApp:O,avatar:g},e.abrupt("return",m);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(e){return function(){var t=Object(c.a)(o.a.mark((function t(n){var r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f({publicKey:e});case 2:return r=t.sent,console.log("User:",r),n({type:s.LOAD_USER_DATA,data:r}),t.abrupt("return",r);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},b=function(){var e=Object(c.a)(o.a.mark((function e(t){var n,a,s,p,d,f,O,b,g,m,h;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.id,a=t.gunPointer,s="".concat("posts","/").concat(n),p="".concat(s,"/contentItems"),d=Date.now(),console.log("Fetching Post (".concat(n,")...")),e.next=7,Promise.all([Object(i.f)({path:s,gunPointer:a}),Object(i.f)({path:p,gunPointer:a})]);case 7:return f=e.sent,O=Object(u.a)(f,2),b=O[0],g=O[1],m=Object.entries(g).filter(l),console.log("Filtered Content Items:",m),e.next=15,Promise.all(m.map(function(){var e=Object(c.a)(o.a.mark((function e(t){var n,r,c,s,l,f,O,b,g,m,h,v,P,_,y,w,L,E,j,A,T,S,D;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(u.a)(t,2),r=n[0],c=n[1],console.log("Content Item:",{id:r,item:c}),e.next=4,Object(i.f)({path:"".concat(p,"/").concat(r,"/type"),gunPointer:a});case 4:if("text/paragraph"!==(s=e.sent)){e.next=12;break}return console.log("Loading Post (".concat(r,") text: Started at ").concat(Date.now()-d,"ms")),e.next=9,Object(i.f)({path:"".concat(p,"/").concat(r,"/text"),gunPointer:a});case 9:return l=e.sent,console.log("Loaded Post (".concat(r,") text in ").concat(Date.now()-d,"ms")),e.abrupt("return",{text:l,type:s});case 12:if("video/embedded"!==s){e.next=23;break}return console.log("Loading Post (".concat(r,") video: Started at ").concat(Date.now()-d,"ms")),e.next=16,Promise.all([Object(i.f)({path:"".concat(p,"/").concat(r,"/magnetURI"),gunPointer:a}),Object(i.f)({path:"".concat(p,"/").concat(r,"/width"),gunPointer:a}),Object(i.f)({path:"".concat(p,"/").concat(r,"/height"),gunPointer:a})]);case 16:return f=e.sent,O=Object(u.a)(f,3),b=O[0],g=O[1],m=O[2],console.log("Loaded Post (".concat(r,") video in ").concat(Date.now()-d,"ms")),e.abrupt("return",{magnetURI:b,width:g,height:m,type:s});case 23:if("image/embedded"!==s){e.next=34;break}return console.log("Loading Post (".concat(r,") image: Started at ").concat(Date.now()-d,"ms")),e.next=27,Promise.all([Object(i.f)({path:"".concat(p,"/").concat(r,"/magnetURI"),gunPointer:a}),Object(i.f)({path:"".concat(p,"/").concat(r,"/width"),gunPointer:a}),Object(i.f)({path:"".concat(p,"/").concat(r,"/height"),gunPointer:a})]);case 27:return h=e.sent,v=Object(u.a)(h,3),P=v[0],_=v[1],y=v[2],console.log("Loaded Post (".concat(r,") image in ").concat(Date.now()-d,"ms")),e.abrupt("return",{magnetURI:P,width:_,height:y,type:s});case 34:if("stream/embedded"!==s){e.next=49;break}return console.log("Loading Post (".concat(r,") stream: Started at ").concat(Date.now()-d,"ms")),e.next=38,Promise.all([Object(i.f)({path:"".concat(p,"/").concat(r,"/magnetURI"),gunPointer:a}),Object(i.f)({path:"".concat(p,"/").concat(r,"/liveStatus"),gunPointer:a}),Object(i.f)({path:"".concat(p,"/").concat(r,"/playbackMagnet"),gunPointer:a}),Object(i.f)({path:"".concat(p,"/").concat(r,"/viewersCounter"),gunPointer:a})]);case 38:return w=e.sent,L=Object(u.a)(w,4),E=L[0],j=L[1],A=L[2],T=L[3],console.log("Loaded Post (".concat(r,") stream in ").concat(Date.now()-d,"ms")),S=s,D=E,"wasLive"===j&&A&&(D=A,S="video/embedded"),e.abrupt("return",{magnetURI:D,width:0,height:0,type:S,liveStatus:j,playbackMagnet:A,viewersCounter:T});case 49:return e.abrupt("return",{text:"Unsupported media type",type:s});case 50:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 15:return h=e.sent,console.log("Post (".concat(n,") took ").concat(Date.now()-d,"ms to load!")),e.abrupt("return",Object(r.a)({},null!==b&&void 0!==b?b:{},{id:n,contentItems:null!==h&&void 0!==h?h:[],type:"post"}));case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(c.a)(o.a.mark((function e(t){var n,r,a,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.id,r=t.sharedGunPointer,a="".concat("sharedPosts","/").concat(n),e.next=4,Object(i.f)({path:a,gunPointer:r});case 4:return c=e.sent,e.abrupt("return",{id:n,date:c.shareDate,originalAuthor:c.originalAuthor,type:"shared"});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(e){var t=e.publicKey,n=e.id;return function(){var e=Object(c.a)(o.a.mark((function e(r){var a,c,u;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=i.c.user(t),c="".concat("posts","/").concat(n),e.next=4,Object(i.f)({path:c,gunPointer:a});case 4:u=e.sent,r({type:s.LOAD_WALL_POST_INFO,data:{id:n,postInfo:u}});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},h=function(e){var t=e.publicKey,n=e.id;return function(){var e=Object(c.a)(o.a.mark((function e(r){var a,p,d,f,O,b;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=i.c.user(t),p="".concat("posts","/").concat(n),d="".concat(p,"/contentItems"),f=Date.now(),e.next=6,Object(i.f)({path:d,gunPointer:a});case 6:return O=e.sent,b=Object.entries(O).filter(l),console.log("Filtered Content Items:",b),r({type:s.LOAD_WALL_POST_CONTENT_LENGTH,data:{id:n,length:b.length}}),e.next=12,Promise.all(b.map(function(){var e=Object(c.a)(o.a.mark((function e(t,c){var l,p,O,b,g,m,h,v,P,_,y,w,L,E,j,A,T,S,D;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=Object(u.a)(t,2),p=l[0],O=l[1],console.log("Content Item:",{id:p,item:O}),e.next=4,Object(i.f)({path:"".concat(d,"/").concat(p,"/type"),gunPointer:a,retryLimit:8,retryDelay:1e3});case 4:if("text/paragraph"!==(b=e.sent)){e.next=14;break}return console.log("Loading Post (".concat(p,") text: Started at ").concat(Date.now()-f,"ms")),e.next=9,Object(i.f)({path:"".concat(d,"/").concat(p,"/text"),gunPointer:a,retryLimit:8,retryDelay:1e3});case 9:return g=e.sent,console.log("Loaded Post (".concat(p,") text in ").concat(Date.now()-f,"ms")),m={text:g,type:b},r({type:s.LOAD_WALL_POST_CONTENT,data:{key:c,id:n,contentItem:m}}),e.abrupt("return",m);case 14:if("video/embedded"!==b){e.next=23;break}return console.log("Loading Post (".concat(p,") video: Started at ").concat(Date.now()-f,"ms")),e.next=18,Object(i.f)({path:"".concat(d,"/").concat(p,"/magnetURI"),gunPointer:a,retryLimit:8,retryDelay:1e3});case 18:return h=e.sent,console.log("Loaded Post (".concat(p,") video in ").concat(Date.now()-f,"ms")),v={magnetURI:h,type:b},r({type:s.LOAD_WALL_POST_CONTENT,data:{key:c,id:n,contentItem:v}}),e.abrupt("return",v);case 23:if("image/embedded"!==b){e.next=32;break}return console.log("Loading Post (".concat(p,") image: Started at ").concat(Date.now()-f,"ms")),e.next=27,Object(i.f)({path:"".concat(d,"/").concat(p,"/magnetURI"),gunPointer:a,retryLimit:8,retryDelay:1e3});case 27:return P=e.sent,console.log("Loaded Post (".concat(p,") image in ").concat(Date.now()-f,"ms")),_={magnetURI:P,type:b},r({type:s.LOAD_WALL_POST_CONTENT,data:{key:c,id:n,contentItem:_}}),e.abrupt("return",_);case 32:if("stream/embedded"!==b){e.next=49;break}return console.log("Loading Post (".concat(p,") stream: Started at ").concat(Date.now()-f,"ms")),e.next=36,Promise.all([Object(i.f)({path:"".concat(d,"/").concat(p,"/magnetURI"),gunPointer:a,retryLimit:8,retryDelay:1e3}),Object(i.f)({path:"".concat(d,"/").concat(p,"/liveStatus"),gunPointer:a,retryLimit:8,retryDelay:1e3}),Object(i.f)({path:"".concat(d,"/").concat(p,"/playbackMagnet"),gunPointer:a,retryLimit:8,retryDelay:1e3}),Object(i.f)({path:"".concat(d,"/").concat(p,"/viewersCounter"),gunPointer:a,retryLimit:8,retryDelay:1e3})]);case 36:return y=e.sent,w=Object(u.a)(y,4),L=w[0],E=w[1],j=w[2],A=w[3],console.log("Loaded Post (".concat(p,") stream in ").concat(Date.now()-f,"ms")),T=b,S=L,"wasLive"===E&&j&&(S=j,T="video/embedded"),D={magnetURI:S,width:0,height:0,type:T,liveStatus:E,playbackMagnet:j,viewersCounter:A},r({type:s.LOAD_WALL_POST_CONTENT,data:{key:c,id:n,contentItem:D}}),e.abrupt("return",D);case 49:return e.abrupt("return",{text:"Unsupported media type",type:b});case 50:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},v=function(){var e=Object(c.a)(o.a.mark((function e(t){var n,a,c,p,d,f;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.gunPointer,a=t.publicKey,c=t.dispatch,e.next=3,Object(i.f)({path:"posts",gunPointer:n});case 3:return p=e.sent,console.log("Posts:",p),d=Object.entries(null!==p&&void 0!==p?p:{}).filter(l),e.next=8,Promise.all(d.map((function(e){var t=Object(u.a)(e,2),n=t[0],o=t[1];return c(m({publicKey:a,id:n})),c(h({publicKey:a,id:n})),Object(r.a)({id:n},o,{type:"post"})})));case 8:return f=e.sent,console.log("User wall",f),c({type:s.LOAD_USER_WALL,data:{posts:f,page:0}}),e.abrupt("return",f);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Object(c.a)(o.a.mark((function e(t){var n,r,a,c,p,d;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.gunPointer,r=t.publicKey,a=t.dispatch,e.next=3,Object(i.f)({path:"sharedPosts",gunPointer:n});case 3:return c=e.sent,console.log("Shared Posts:",c),p=Object.entries(null!==c&&void 0!==c?c:{}).filter(l),e.next=8,Promise.all(p.map((function(e){var t=Object(u.a)(e,1)[0];return g({id:t,sharedGunPointer:i.c.user(r)})})));case 8:return d=e.sent,a({type:s.LOAD_USER_WALL,data:{posts:d,page:0}}),e.abrupt("return",d);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=function(e){return function(){var t=Object(c.a)(o.a.mark((function t(n){var r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r=i.c.user(e),t.next=4,Promise.any([v({gunPointer:r,publicKey:e,dispatch:n}),P({gunPointer:r,dispatch:n,publicKey:e})]);case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.error(t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}()},y=function(e){var t=e.publicKey,n=e.postId,r=e.type,a=void 0===r?"post":r;return function(){var e=Object(c.a)(o.a.mark((function e(r){var c,u,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Getting Pinned post:",t,n,a),t&&n){e.next=3;break}return e.abrupt("return");case 3:if(c=i.c.user(t),"post"!==a){e.next=10;break}return e.next=7,b({id:n,gunPointer:c});case 7:return(u=e.sent)&&r({type:s.PIN_WALL_POST,data:u}),e.abrupt("return",u);case 10:if("sharedPost"!==a){e.next=16;break}return e.next=13,g({id:n,sharedGunPointer:c});case 13:return(l=e.sent)&&r({type:s.PIN_WALL_POST,data:l}),e.abrupt("return",l);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},w=function(e){return function(t){t({type:s.UPDATE_USER_PROFILE,data:e})}},L=function(e){return function(t){t({type:s.UPDATE_WALL_POST,data:e})}},E=function(){return function(e){e({type:s.RESET_USER_WALL})}},j=function(){return function(e){e({type:s.RESET_USER_DATA})}}},16:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"c",(function(){return d})),n.d(t,"b",(function(){return f})),n.d(t,"d",(function(){return O}));var r=n(3),a=n.n(r),o=n(2),c=n(8),u=n(6),i=n(18),s=n.n(i),l=n(1),p={LOAD_PAYMENT_REQUEST:"tip/paymentRequest/load",RESET_PAYMENT_REQUEST:"tip/paymentRequest/reset",OPEN_TIP_MODAL:"tip/modal/open",CLOSE_TIP_MODAL:"tip/modal/close",UPDATE_METADATA:"tip/metadata/update"},d=function(e){return{type:p.OPEN_TIP_MODAL,data:e}},f=function(){return{type:p.CLOSE_TIP_MODAL}},O=function(e){var t=e.senderPair,n=e.recipientPublicKey,r=e.amount,i=e.metadata;return function(){var e=Object(u.a)(a.a.mark((function e(u){var d,f,O,b,g,m,h,v,P,_,y,w,L,E,j,A,T,S,D;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(l.d)(t.alias,t.pass);case 2:return O=e.sent,b=l.c.user(n),e.next=6,Promise.all([Object(l.f)({path:"epub",gunPointer:b}),Object(l.f)({path:"currentOrderAddress",gunPointer:b})]);case 6:return g=e.sent,m=Object(c.a)(g,2),h=m[0],v=m[1],e.next=12,s.a.secret(h,O.sea);case 12:return P=e.sent,console.log("Order Address:",v),e.next=16,Promise.all([s.a.encrypt(l.b+r.toString(),P),s.a.encrypt(l.b+"Tipped user!",P)]);case 16:return _=e.sent,y=Object(c.a)(_,2),w=y[0],L=y[1],E=Object(o.a)({amount:l.a+w,from:O.sea.pub,memo:l.a+L,timestamp:Date.now()},i),console.log("Order:",E),e.next=24,Object(l.i)({path:"orderNodes/".concat(v),data:E});case 24:return j=e.sent,console.log("New Order:",j,j._["#"].split("/").slice(-1)[0]),A=j._["#"].split("/").slice(-1)[0],console.log("New Order ID:",A,"orderToResponse/".concat(A)),e.next=30,Object(l.f)({path:"orderToResponse/".concat(A),gunPointer:l.c.user(n),method:"on"});case 30:return e.next=32,Object(l.f)({path:"orderToResponse/".concat(A),gunPointer:l.c.user(n)});case 32:return T=e.sent,console.log("Encrypted Order:",T.response,null===(d=T.response)||void 0===d?void 0:d.toString()),e.next=36,s.a.decrypt(T.response.replace(l.a,""),P);case 36:if(S=e.sent,D={response:null===S||void 0===S||null===(f=S.replace)||void 0===f?void 0:f.call(S,l.b,""),type:T.type},console.log("[ORDER] Decrypted order:",D),"err"!==D.type){e.next=41;break}throw{field:"order",message:"An error has occurred while retrieving the order",data:D.response.replace(l.a,"")};case 41:return u({type:p.LOAD_PAYMENT_REQUEST,data:D.response.replace(l.a,"")}),e.abrupt("return",{paymentRequest:D.response.replace(l.a,""),ackNode:T.ackNode});case 43:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},25:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(){return navigator.userAgent.includes("Prerender")}},34:function(e,t,n){"use strict";var r=n(0),a=n.n(r);n(63);t.a=function(e){var t=e.text,n=void 0===t?"Loading...":t;return a.a.createElement("div",{className:"loading-wall"},a.a.createElement("div",{className:"loading-wall-icon"},a.a.createElement("span",{className:"loading-circle loading-circle-1"}),a.a.createElement("span",{className:"loading-circle loading-circle-2"}),a.a.createElement("span",{className:"loading-circle loading-circle-3"}),a.a.createElement("span",{className:"loading-circle loading-circle-4"}),a.a.createElement("span",{className:"loading-circle loading-circle-5"})),a.a.createElement("div",{className:"loading-wall-text"},n))}},37:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=37},39:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return i}));var r=n(3),a=n.n(r),o=n(6),c=n(1),u={LOAD_GUN_PAIR:"auth/loadPair"},i=function(){return function(){var e=Object(o.a)(a.a.mark((function e(t){var n,r,o,i,s,l,p,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=localStorage.getItem("shocknet/gun/alias"),r=localStorage.getItem("shocknet/gun/pass"),o=localStorage.getItem("shocknet/gun/pub"),i=localStorage.getItem("shocknet/gun/epub"),n&&r){e.next=19;break}return console.log("[Gun] Keypair not found, generating a new one..."),e.next=8,Object(c.e)();case 8:return s=e.sent,localStorage.setItem("shocknet/gun/alias",s.alias),localStorage.setItem("shocknet/gun/pass",s.pass),localStorage.setItem("shocknet/gun/pub",s.pub),l=c.c.user(s.pub),e.next=15,Object(c.f)({path:"epub",gunPointer:l});case 15:return p=e.sent,localStorage.setItem("shocknet/gun/epub",p),t({type:u.LOAD_GUN_PAIR,data:s}),e.abrupt("return");case 19:return console.log("[Gun] Keypair exists!"),d={pub:o,alias:n,epub:i,pass:r},console.log("[Gun] User Authenticated"),t({type:u.LOAD_GUN_PAIR,data:d}),e.abrupt("return",d);case 24:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},53:function(e,t,n){e.exports=n(79)},62:function(e,t,n){},63:function(e,t,n){},64:function(e,t,n){},65:function(e,t,n){},79:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(21),c=n.n(o),u=n(33),i=n(24),s=(n(62),n(7)),l=n(34),p=(n(64),function(){return a.a.createElement("a",{href:"https://My.Lightning.Page",target:"_blank",rel:"noreferrer noopener",className:"download-shockwallet-btn"},a.a.createElement("i",{className:"download-shockwallet-btn-icon fas fa-user"}),a.a.createElement("p",{className:"download-shockwallet-btn-text"},"Create a Lightning Page"))}),d=(n(65),n(36)),f=a.a.lazy((function(){return Promise.all([n.e(2),n.e(3),n.e(10)]).then(n.bind(null,544))})),O=a.a.lazy((function(){return Promise.all([n.e(3),n.e(11)]).then(n.bind(null,545))}));var b=Object(s.i)((function(){return a.a.createElement("div",{className:"App"},a.a.createElement(d.a,null,a.a.createElement("meta",{property:"twitter:site",content:"@shocknet"}),a.a.createElement("meta",{property:"twitter:card",content:"summary"}),a.a.createElement("meta",{property:"og:url",content:window.location.href}),a.a.createElement("meta",{property:"og:type",content:"website"})),a.a.createElement(r.Suspense,{fallback:a.a.createElement(l.a,null)},a.a.createElement(s.d,null,a.a.createElement(s.b,{path:"/user/:userId",component:f}),a.a.createElement(s.b,{path:"/:userId/:type/:postId",component:O}),a.a.createElement(s.b,{path:"/:userId",component:f}),a.a.createElement(s.a,{to:"/tcUUzRkyzXYhIZQbmopiCLREyZ_kQJqQ-C4XesecOm4.GX1Dv-eGcfKuOPobBK9Q-Sc-o697XgVCQzOCfqfimIo"}))),a.a.createElement(p,null))})),g=n(14),m=n(32),h=n(28),v=n(2),P=n(12),_={wall:{posts:[],page:-1,totalPages:0},profile:{}},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0,n=t.data;switch(t.type){case P.a.LOAD_USER_WALL:return Object(v.a)({},e,{wall:Object(v.a)({},e.wall,{posts:[].concat(Object(h.a)(e.wall.posts),Object(h.a)(n.posts)).sort((function(e,t){return t.date-e.date})),page:n.page})});case P.a.LOAD_USER_WALL_TOTAL_PAGES:return Object(v.a)({},e,{wall:Object(v.a)({},e.wall,{totalPages:n})});case P.a.LOAD_WALL_POST_CONTENT_LENGTH:var r;return Object(v.a)({},e,{wall:Object(v.a)({},e.wall,{posts:null===(r=e.wall.posts)||void 0===r?void 0:r.map((function(e){return n.id===e.id?Object(v.a)({},e,{contentItems:Array.from({length:n.length})}):e}))})});case P.a.LOAD_WALL_POST_INFO:var a,o=null===(a=e.wall.posts)||void 0===a?void 0:a.map((function(e){var t;return n.id===e.id?Object(v.a)({},e,{},n.postInfo,{contentItems:null!==(t=e.contentItems)&&void 0!==t?t:[]}):e})),c=o.sort((function(e,t){return t.date-e.date}));return Object(v.a)({},e,{wall:Object(v.a)({},e.wall,{posts:c})});case P.a.LOAD_WALL_POST_CONTENT:var u;return Object(v.a)({},e,{wall:Object(v.a)({},e.wall,{posts:null===(u=e.wall.posts)||void 0===u?void 0:u.map((function(e){var t,r=n.id===e.id;return console.log({post:e,data:n}),r?Object(v.a)({},e,{contentItems:null===(t=e.contentItems)||void 0===t?void 0:t.map((function(e,t){var r;return n.key===t?Object(v.a)({},null!==e&&void 0!==e?e:{},{},null!==(r=n.contentItem)&&void 0!==r?r:{}):e}))}):e}))})});case P.a.LOAD_USER_DATA:return Object(v.a)({},e,{profile:n});case P.a.LOAD_USER_AVATAR:return Object(v.a)({},e,{profile:Object(v.a)({},e.profile,{avatar:n})});case P.a.UPDATE_USER_PROFILE:return Object(v.a)({},e,{profile:Object(v.a)({},e.profile,{},n)});case P.a.UPDATE_WALL_POST:var i=t.data;return Object(v.a)({},e,{wall:Object(v.a)({},e.wall,{posts:e.wall.posts.map((function(e){return i.postID===e.id?Object(v.a)({},e,{},i.data):e}))})});case P.a.PIN_WALL_POST:return Object(v.a)({},e,{wall:Object(v.a)({},e.wall,{pinnedPost:Object(v.a)({},n,{pinned:!0})})});case P.a.RESET_USER_WALL:return Object(v.a)({},e,{wall:_.wall});default:return e}},w=n(39),L={pair:{}},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w.a.LOAD_GUN_PAIR:var n=t.data;return Object(v.a)({},e,{pair:n});default:return e}},j=n(16),A={paymentRequest:null},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case j.a.LOAD_PAYMENT_REQUEST:var n=t.data;return Object(v.a)({},e,{paymentRequest:n});case j.a.RESET_PAYMENT_REQUEST:return Object(v.a)({},e,{paymentRequest:null});case j.a.OPEN_TIP_MODAL:var r=t.data;return Object(v.a)({},e,{modalOpen:!0,metadata:r});case j.a.CLOSE_TIP_MODAL:return Object(v.a)({},e,{modalOpen:!1,metadata:{}});case j.a.UPDATE_METADATA:var a=t.data;return Object(v.a)({},e,{metadata:a});default:return e}},S=Object(g.c)({user:y,auth:E,tip:T}),D=window.__REDUX_DEVTOOLS_EXTENSION__?Object(g.e)(S,Object(g.d)(Object(g.a)(m.a),window.__REDUX_DEVTOOLS_EXTENSION__())):Object(g.e)(S,Object(g.a)(m.a));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(a.a.createElement(u.a,{store:D},a.a.createElement(a.a.StrictMode,null,a.a.createElement(i.a,{basename:"/"},a.a.createElement(b,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[53,5,7]]]);
//# sourceMappingURL=main.f2720ef3.chunk.js.map