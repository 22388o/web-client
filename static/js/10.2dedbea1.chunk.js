(this["webpackJsonpshockwallet-web"]=this["webpackJsonpshockwallet-web"]||[]).push([[10],{116:function(e,t,n){e.exports=n.p+"static/media/av1.48bf5c6a.jpg"},130:function(e,t,n){"use strict";var a=n(8),r=n(0),c=n(32),o=n(115),i=n.n(o),u=n(1);t.a=function(e){var t=Object(c.b)(),n=Object(c.c)((function(e){return e.user.profile})),o=Object(r.useState)(!1),s=Object(a.a)(o,2),l=s[0],f=s[1],d=Object(r.useState)(!1),p=Object(a.a)(d,2),m=p[0],b=p[1],v=Object(r.useState)(!1),O=Object(a.a)(v,2),j=O[0],g=O[1],h=Object(r.useState)(!1),k=Object(a.a)(h,2),y=k[0],E=k[1],x=Object(r.useState)(),w=Object(a.a)(x,2),N=w[0],P=w[1],S=Object(r.useCallback)((function(){var e=i.a.utc().subtract(1,"minutes"),t=i.a.utc(m).isSameOrAfter(e),n=i.a.utc(l).isSameOrAfter(e);E(t),g(n)}),[l,m]);return Object(r.useEffect)((function(){N&&clearTimeout(N),S();var e=setTimeout((function(){S()}),3e4);return P(e),function(){return clearTimeout(N)}}),[n,S]),Object(r.useEffect)((function(){var t=Object(u.h)({path:"Profile/lastSeenApp",gunPointer:Object(u.g)(e),callback:function(e){f(e)}}),n=Object(u.h)({path:"Profile/lastSeenNode",gunPointer:Object(u.g)(e),callback:function(e){b(e)}});return function(){t.off(),n.off()}}),[t,e]),{isOnlineApp:j,isOnlineNode:y}}},131:function(e,t,n){"use strict";var a=n(0),r=n.n(a),c=n(32),o=n(16),i=n(33),u=(n(132),r.a.lazy((function(){return Promise.all([n.e(2),n.e(9),n.e(14)]).then(n.bind(null,273))})));t.a=function(e){var t=Object(c.b)(),n=Object(c.c)((function(e){return e.tip.modalOpen})),s=Object(a.useCallback)((function(){t(Object(o.b)())}),[t]),l=Object(a.useMemo)((function(){return r.a.createElement(i.a,{text:"Loading..."})}),[]);return n?r.a.createElement("div",{className:"modal-container"},r.a.createElement("div",{className:"modal-overlay",onClick:s}),r.a.createElement("div",{className:"modal-content"},r.a.createElement(a.Suspense,{fallback:l},r.a.createElement(u,e)))):null}},132:function(e,t,n){},279:function(e,t,n){},280:function(e,t,n){e.exports=n.p+"static/media/banner-bg.f59337b5.jpg"},281:function(e,t,n){e.exports=n.p+"static/media/lightning-logo.ea3bd789.svg"},282:function(e,t,n){},540:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n.n(a),c=n(6),o=n(8),i=n(0),u=n.n(i),s=n(32),l=n(5),f=n(114),d=n(13),p=n(16),m=n(130),b=n(1),v=(n(87),n(33)),O=(n(279),function(e){var t=e.text;return u.a.createElement("div",{className:"divider-container"},u.a.createElement("div",{className:"dash"}),u.a.createElement("p",{className:"divider-text"},t),u.a.createElement("div",{className:"dash"}))}),j=n(131),g=n(280),h=n.n(g),k=n(116),y=n.n(k),E=n(281),x=n.n(E),w=(n(282),u.a.lazy((function(){return Promise.all([n.e(0),n.e(1)]).then(n.bind(null,278))}))),N=u.a.lazy((function(){return Promise.all([n.e(0),n.e(1),n.e(12)]).then(n.bind(null,535))}));t.default=function(){var e,t=Object(s.b)(),n=Object(l.h)(),a=n.userId,g=Object(s.c)((function(e){return e.user.wall})),k=Object(s.c)((function(e){return e.user.profile})),E=Object(m.a)(a),P=E.isOnlineApp,S=E.isOnlineNode,I=Object(i.useState)(!0),C=Object(o.a)(I,2),A=(C[0],C[1]),L=Object(i.useState)(!0),R=Object(o.a)(L,2),U=R[0],T=R[1],M=Object(i.useCallback)(Object(c.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,A(!0),t(Object(d.i)()),e.next=5,t(Object(d.g)(a));case 5:A(!1),t(Object(d.e)(a)),t(Object(d.d)(a)),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0),A(!1);case 14:case"end":return e.stop()}}),e,null,[[0,10]])}))),[t,a]),K=Object(i.useCallback)(Object(c.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("Setting Loading status to:",!0),T(!0),t(Object(d.j)()),e.next=6,t(Object(d.h)(a));case 6:console.log("Setting Loading status to:",!1),T(!1),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0),console.log("Setting Loading status to:",!1),T(!1);case 15:case"end":return e.stop()}}),e,null,[[0,10]])}))),[t,a]),z=Object(i.useCallback)((function(){t(Object(p.c)({targetType:"spontaneousPayment"}))}),[t]),q=Object(i.useCallback)(Object(c.a)(r.a.mark((function e(){var a,c,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.postId,c=n.userId,o=n.type,e.next=3,M();case 3:K(),t(Object(d.c)({postId:a,publicKey:c,type:o}));case 5:case"end":return e.stop()}}),e)}))),[t,M,K,n]);Object(i.useEffect)((function(){q();var e=Object(b.h)({path:"Profile/displayName",gunPointer:Object(b.g)(a),callback:function(e){t(Object(d.k)({displayName:e}))}}),n=Object(b.h)({path:"Profile/bio",gunPointer:Object(b.g)(a),callback:function(e){t(Object(d.k)({bio:e}))}});return function(){e.off(),n.off()}}),[t,q,a]),Object(i.useEffect)((function(){var e;document.title=null!==(e=k.displayName)&&void 0!==e?e:k.alias}),[k]);var B=null!==(e=k.displayName)&&void 0!==e?e:k.alias,W=Object(i.useCallback)((function(e){if(e){var t,n,r=k.avatar?"data:image/png;base64,".concat(k.avatar):y.a;if("shared"===e.type)return u.a.createElement(i.Suspense,{fallback:u.a.createElement("div",{className:"post-loading"},u.a.createElement(v.a,{text:"Loading Post..."})),key:e.id},u.a.createElement(N,{postID:e.id,postPublicKey:e.originalAuthor,sharedPostId:e.id,sharedTimestamp:e.date,sharerAvatar:r,sharerPublicKey:a,sharerUsername:B,isOnlineNode:S,pinned:e.pinned}));if("post"===e.type)return u.a.createElement(i.Suspense,{fallback:u.a.createElement("div",{className:"post-loading"},u.a.createElement(v.a,{text:"Loading Post..."})),key:e.id},u.a.createElement(w,{timestamp:e.date,contentItems:e.contentItems,username:B,avatar:r,publicKey:a,page:e.page,id:e.id,tipValue:null!==(t=e.tipValue)&&void 0!==t?t:0,tipCounter:null!==(n=e.tipCounter)&&void 0!==n?n:0,isOnlineNode:S,pinned:e.pinned,post:e}))}}),[S,k.avatar,a,B]);return u.a.createElement("div",{className:"user-page"},u.a.createElement("div",{className:"top-banner",style:{backgroundImage:"url(".concat(k.header?"data:image/png;base64,".concat(k.header):h.a,")")}}),u.a.createElement("div",{className:"user-details"},u.a.createElement("div",{className:"main-av",style:{backgroundImage:"url(".concat(k.avatar?"data:image/png;base64,".concat(k.avatar):y.a,")")}}),u.a.createElement("div",{className:"details"},u.a.createElement("div",{className:"user-info"},u.a.createElement("p",{className:"username"},B),u.a.createElement("div",{className:"activity"},u.a.createElement("p",{className:"status",style:{color:P?"#01a33d":S?"#f2a900":"#888"}},P?"Active Recently":S?"Node Online":"Node Offline")),k.bio?u.a.createElement("div",{className:"desc"},u.a.createElement("p",{className:"title"},"Bio"),u.a.createElement("p",null,k.bio)):null),u.a.createElement("div",{className:"send-tip-btn",onClick:z,style:{opacity:S?1:.5,cursor:S?"pointer":"default"},"data-tip":S?null:"You can only tip users with online nodes"},u.a.createElement("img",{src:x.a,alt:"Bitcoin Lightning"}),u.a.createElement("p",null,"Send Tip")),u.a.createElement(f.a,{backgroundColor:"#3a4d67",effect:"solid"}))),u.a.createElement("div",{className:"tabs-holder"},u.a.createElement("p",{className:"tab active"},"Feed")),u.a.createElement("div",{className:"posts-holder"},W(g.pinnedPost),g.pinnedPost&&u.a.createElement(O,{text:"More Posts"}),g.posts.map(W)),U?u.a.createElement(v.a,{text:"Loading ".concat(g.page>=0?"More":"Wall"," Posts...")}):null,u.a.createElement(j.a,{publicKey:a}))}},87:function(e,t,n){"use strict";n.d(t,"b",(function(){return v})),n.d(t,"a",(function(){return y}));var a=n(2),r=n.n(a),c=n(6),o=n(3),i=n(8),u=n(17),s=n(164),l=n.n(s),f=function(){var e=Object(c.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,l.a._init){e.next=4;break}return e.next=4,new Promise((function(e,t){l.a.init("ShockWalletStore").then((function(){return console.log("File cache initialized!"),l.a.persist()})).then((function(n){n.persistent?e(n):t(n)}))}));case 4:return e.next=6,l.a.load(t);case 6:return n=e.sent,e.abrupt("return",n.createURL());case 10:return e.prev=10,e.t0=e.catch(0),console.warn(e.t0),e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),d=function(e,t){var n=document.querySelectorAll(t);return n&&n.length&&n.forEach((function(t){t.src=e,t.muted=!0,t.autoplay=!0})),!!n&&!!n.length},p=function(e,t){return l.a.save(e,t)},m=function(e){var t=Promise.resolve();return e.forEach((function(e){t=t.then((function(){return e()}))})),t},b={"video/embedded":{formats:["mp4","webm"],element:"video",options:{autoplay:!0,muted:!0}},"image/embedded":{formats:["jpg","png","webp","jpeg"],element:"img",options:{}}},v=Object.values(b).reduce((function(e,t){return[].concat(Object(u.a)(e),Object(u.a)(t.formats))}),[]),O=function(e){var t,n,a=null===(t=e.name)||void 0===t||null===(n=t.split("."))||void 0===n?void 0:n.slice(-1)[0],r=Object.entries(b).filter((function(e){var t=Object(i.a)(e,2);t[0];return t[1].formats.includes(a)})),c=Object(i.a)(r,1)[0];if(c){var u=Object(i.a)(c,2),s=u[0],l=u[1];return Object(o.a)({name:s},l)}return null},j=null,g=function(){var e=Object(c.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(j){e.next=5;break}return e.next=3,Promise.all([n.e(6),n.e(8)]).then(n.t.bind(null,538,7));case 3:t=e.sent,j=new t.default;case 5:return e.abrupt("return",j);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(e){var t=e.id,n=e.key;return function(e){return"".concat(t,"-").concat(n,"-").concat(e.name)}},k=function(e){var t=e.file,n=e.type,a=e.torrentMode,r=e.torrent,c=n.element,o="".concat(c,'[data-torrent="').concat(r.magnetURI,'"]'),u=document.querySelectorAll(o);console.log("Torrent Elements:",u),u.forEach((function(e){var c=decodeURIComponent(r.magnetURI.replace(/.*(ws=)/gi,"")),o=n.formats.filter((function(e){return c.toLowerCase().endsWith(".".concat(e.toLowerCase()))})),u=Object(i.a)(o,1)[0];!a&&u?e.setAttribute("src",c):t.renderTo(e,n.options)}))},y=function(){var e=Object(c.a)(r.a.mark((function e(){var t,n,a,o,s=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:[],n=!(s.length>1&&void 0!==s[1])||s[1],e.next=4,Promise.all(t.map(function(){var e=Object(c.a)(r.a.mark((function e(t){var a,o,u,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.contentItems,o=t.id,u=Object.entries(a).filter((function(e){var t=Object(i.a)(e,2)[1];return b[t.type]}))){e.next=4;break}return e.abrupt("return",[]);case 4:return e.next=6,g();case 6:return s=e.sent,e.abrupt("return",u.map((function(e){var t=Object(i.a)(e,2),a=t[0],u=t[1];return function(){return new Promise((function(e){var t=h({id:o,key:a});s.get(u.magnetURI)?e(!0):s.add(u.magnetURI,function(){var a=Object(c.a)(r.a.mark((function a(o){var l,m,v;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:e(!0),l=o.files.filter((function(e){var t,n,a=null===(t=e.name)||void 0===t||null===(n=t.split("."))||void 0===n?void 0:n.slice(-1)[0],r=Object.entries(b).filter((function(e){return Object(i.a)(e,2)[1].formats.includes(a)}))[0];return!!r&&Object(i.a)(r,2)[1].formats.includes(a)})),m=l.filter((function(e){return e.name.match(/-thumb\.([\w\d]){2,4}$/gi)})),v=m.map((function(e){return e.name.replace(/\.([\w\d]){2,4}$/gi,"")})),l.map(function(){var e=Object(c.a)(r.a.mark((function e(a){var c,o,i,l,p,b,j,g,h,y,E,x,w;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!v.includes(a.name)){e.next=2;break}return e.abrupt("return");case 2:if(c=O(a)){e.next=5;break}return e.abrupt("return");case 5:return o=t(a),i=c.element,l="".concat(i,'[data-torrent="').concat(u.magnetURI,'"]'),e.next=10,f(o);case 10:if(p=e.sent,b=o.split(".").slice(0,-1).join("."),j="".concat(b,"-thumb"),g=v.indexOf(j),h=m[g],y=h?O(h):null,!p){e.next=27;break}if((E=s.get(u.magnetURI))&&E.destroy(),"video"!==i||!h){e.next=25;break}return x="".concat(y.element,'[data-torrent="').concat(u.magnetURI,'"]'),e.next=23,f(t(h));case 23:w=e.sent,d(w,x);case 25:return d(p,l),e.abrupt("return");case 27:k({file:a,type:c,torrentMode:n,torrent:u}),h&&k({file:h,type:y,torrentMode:n,torrent:u});case 29:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),o.on("done",(function(){l.map((function(e){var n=O(e),a=t(e),o=n.element,i="".concat(o,'[data-torrent="').concat(u.magnetURI,'"]');e.getBlob(function(){var e=Object(c.a)(r.a.mark((function e(t,n){var c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=3;break}return console.warn(t),e.abrupt("return");case 3:return console.log("Caching loaded file...",a,n),e.next=6,p(a,n);case 6:if("false"!==document.querySelector(i).dataset.played){e.next=12;break}return e.next=10,f(a);case 10:c=e.sent,d(c,i);case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())}))}));case 6:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}())}))}})));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 4:a=e.sent,o=a.reduce((function(e,t){return[].concat(Object(u.a)(e),Object(u.a)(t))}),[]),m(o);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}}]);
//# sourceMappingURL=10.2dedbea1.chunk.js.map