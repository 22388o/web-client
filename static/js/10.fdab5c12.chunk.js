(this["webpackJsonpshockwallet-web"]=this["webpackJsonpshockwallet-web"]||[]).push([[10],{116:function(e,t,n){e.exports=n.p+"static/media/av1.48bf5c6a.jpg"},130:function(e,t,n){"use strict";var a=n(8),r=n(0),c=n(32),i=n(115),o=n.n(i),u=n(1);t.a=function(e){var t=Object(c.b)(),n=Object(c.c)((function(e){return e.user.profile})),i=Object(r.useState)(!1),s=Object(a.a)(i,2),l=s[0],d=s[1],f=Object(r.useState)(!1),m=Object(a.a)(f,2),p=m[0],b=m[1],v=Object(r.useState)(!1),O=Object(a.a)(v,2),h=O[0],j=O[1],g=Object(r.useState)(!1),y=Object(a.a)(g,2),k=y[0],E=y[1],x=Object(r.useState)(),w=Object(a.a)(x,2),N=w[0],P=w[1],S=Object(r.useCallback)((function(){var e=o.a.utc().subtract(1,"minutes"),t=o.a.utc(p).isSameOrAfter(e),n=o.a.utc(l).isSameOrAfter(e);E(t),j(n)}),[l,p]);return Object(r.useEffect)((function(){N&&clearTimeout(N),S();var e=setTimeout((function(){S()}),3e4);return P(e),function(){return clearTimeout(N)}}),[n,S]),Object(r.useEffect)((function(){var t=Object(u.h)({path:"Profile/lastSeenApp",gunPointer:Object(u.g)(e),callback:function(e){d(e)}}),n=Object(u.h)({path:"Profile/lastSeenNode",gunPointer:Object(u.g)(e),callback:function(e){b(e)}});return function(){t.off(),n.off()}}),[t,e]),{isOnlineApp:h,isOnlineNode:k}}},131:function(e,t,n){"use strict";var a=n(0),r=n.n(a),c=n(32),i=n(16),o=n(33),u=(n(132),r.a.lazy((function(){return Promise.all([n.e(2),n.e(9),n.e(14)]).then(n.bind(null,273))})));t.a=function(e){var t=Object(c.b)(),n=Object(c.c)((function(e){return e.tip.modalOpen})),s=Object(a.useCallback)((function(){t(Object(i.b)())}),[t]),l=Object(a.useMemo)((function(){return r.a.createElement(o.a,{text:"Loading..."})}),[]);return n?r.a.createElement("div",{className:"modal-container"},r.a.createElement("div",{className:"modal-overlay",onClick:s}),r.a.createElement("div",{className:"modal-content"},r.a.createElement(a.Suspense,{fallback:l},r.a.createElement(u,e)))):null}},132:function(e,t,n){},279:function(e,t,n){},280:function(e,t,n){e.exports=n.p+"static/media/banner-bg.f59337b5.jpg"},281:function(e,t,n){e.exports=n.p+"static/media/lightning-logo.ea3bd789.svg"},282:function(e,t,n){},540:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n.n(a),c=n(6),i=n(8),o=n(0),u=n.n(o),s=n(32),l=n(5),d=n(114),f=n(13),m=n(16),p=n(130),b=n(1),v=(n(87),n(33)),O=(n(279),function(e){var t=e.text;return u.a.createElement("div",{className:"divider-container"},u.a.createElement("div",{className:"dash"}),u.a.createElement("p",{className:"divider-text"},t),u.a.createElement("div",{className:"dash"}))}),h=n(131),j=n(280),g=n.n(j),y=n(116),k=n.n(y),E=n(281),x=n.n(E),w=(n(282),u.a.lazy((function(){return Promise.all([n.e(0),n.e(1)]).then(n.bind(null,278))}))),N=u.a.lazy((function(){return Promise.all([n.e(0),n.e(1),n.e(12)]).then(n.bind(null,535))}));t.default=function(){var e,t=Object(s.b)(),n=Object(l.h)(),a=n.userId,j=Object(s.c)((function(e){return e.user.wall})),y=Object(s.c)((function(e){return e.user.profile})),E=Object(p.a)(a),P=E.isOnlineApp,S=E.isOnlineNode,I=Object(o.useState)(!0),C=Object(i.a)(I,2),L=(C[0],C[1]),R=Object(o.useState)(!0),U=Object(i.a)(R,2),A=U[0],T=U[1],F=Object(o.useCallback)(Object(c.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,L(!0),t(Object(f.i)()),e.next=5,t(Object(f.g)(a));case 5:L(!1),t(Object(f.e)(a)),t(Object(f.d)(a)),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0),L(!1);case 14:case"end":return e.stop()}}),e,null,[[0,10]])}))),[t,a]),M=Object(o.useCallback)(Object(c.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("Setting Loading status to:",!0),T(!0),t(Object(f.j)()),e.next=6,t(Object(f.h)(a));case 6:console.log("Setting Loading status to:",!1),T(!1),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0),console.log("Setting Loading status to:",!1),T(!1);case 15:case"end":return e.stop()}}),e,null,[[0,10]])}))),[t,a]),q=Object(o.useCallback)((function(){t(Object(m.c)({targetType:"spontaneousPayment"}))}),[t]),K=Object(o.useCallback)(Object(c.a)(r.a.mark((function e(){var a,c,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.postId,c=n.userId,i=n.type,e.next=3,F();case 3:M(),t(Object(f.c)({postId:a,publicKey:c,type:i}));case 5:case"end":return e.stop()}}),e)}))),[t,F,M,n]);Object(o.useEffect)((function(){K();var e=Object(b.h)({path:"Profile/displayName",gunPointer:Object(b.g)(a),callback:function(e){t(Object(f.k)({displayName:e}))}}),n=Object(b.h)({path:"Profile/bio",gunPointer:Object(b.g)(a),callback:function(e){t(Object(f.k)({bio:e}))}});return function(){e.off(),n.off()}}),[t,K,a]),Object(o.useEffect)((function(){var e;document.title=null!==(e=y.displayName)&&void 0!==e?e:y.alias}),[y]);var z=null!==(e=y.displayName)&&void 0!==e?e:y.alias,B=Object(o.useCallback)((function(e){if(e){var t,n,r=y.avatar?"data:image/png;base64,".concat(y.avatar):k.a;if("shared"===e.type)return u.a.createElement(o.Suspense,{fallback:u.a.createElement("div",{className:"post-loading"},u.a.createElement(v.a,{text:"Loading Post..."})),key:e.id},u.a.createElement(N,{postID:e.id,postPublicKey:e.originalAuthor,sharedPostId:e.id,sharedTimestamp:e.date,sharerAvatar:r,sharerPublicKey:a,sharerUsername:z,isOnlineNode:S,pinned:e.pinned}));if("post"===e.type)return u.a.createElement(o.Suspense,{fallback:u.a.createElement("div",{className:"post-loading"},u.a.createElement(v.a,{text:"Loading Post..."})),key:e.id},u.a.createElement(w,{timestamp:e.date,contentItems:e.contentItems,username:z,avatar:r,publicKey:a,page:e.page,id:e.id,tipValue:null!==(t=e.tipValue)&&void 0!==t?t:0,tipCounter:null!==(n=e.tipCounter)&&void 0!==n?n:0,isOnlineNode:S,pinned:e.pinned,post:e}))}}),[S,y.avatar,a,z]);return u.a.createElement("div",{className:"user-page"},u.a.createElement("div",{className:"top-banner",style:{backgroundImage:"url(".concat(y.header?"data:image/png;base64,".concat(y.header):g.a,")")}}),u.a.createElement("div",{className:"user-details"},u.a.createElement("div",{className:"main-av",style:{backgroundImage:"url(".concat(y.avatar?"data:image/png;base64,".concat(y.avatar):k.a,")")}}),u.a.createElement("div",{className:"details"},u.a.createElement("div",{className:"user-info"},u.a.createElement("p",{className:"username"},z),u.a.createElement("div",{className:"activity"},u.a.createElement("p",{className:"status",style:{color:P?"#01a33d":S?"#f2a900":"#888"}},P?"Active Recently":S?"Node Online":"Node Offline")),y.bio?u.a.createElement("div",{className:"desc"},u.a.createElement("p",{className:"title"},"Bio"),u.a.createElement("p",null,y.bio)):null),u.a.createElement("div",{className:"send-tip-btn",onClick:q,style:{opacity:S?1:.5,cursor:S?"pointer":"default"},"data-tip":S?null:"You can only tip users with online nodes"},u.a.createElement("img",{src:x.a,alt:"Bitcoin Lightning"}),u.a.createElement("p",null,"Send Tip")),u.a.createElement(d.a,{backgroundColor:"#3a4d67",effect:"solid"}))),u.a.createElement("div",{className:"tabs-holder"},u.a.createElement("p",{className:"tab active"},"Feed")),u.a.createElement("div",{className:"posts-holder"},B(j.pinnedPost),j.pinnedPost&&u.a.createElement(O,{text:"More Posts"}),j.posts.map(B)),A?u.a.createElement(v.a,{text:"Loading ".concat(j.page>=0?"More":"Wall"," Posts...")}):null,u.a.createElement(h.a,{publicKey:a}))}},87:function(e,t,n){"use strict";n.d(t,"b",(function(){return v})),n.d(t,"a",(function(){return x}));var a=n(2),r=n.n(a),c=n(6),i=n(3),o=n(8),u=n(17),s=n(164),l=n.n(s),d=function(){var e=Object(c.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,l.a._init){e.next=4;break}return e.next=4,new Promise((function(e,t){l.a.init("ShockWalletStore").then((function(){return console.log("File cache initialized!"),l.a.persist()})).then((function(n){n.persistent?e(n):t(n)}))}));case 4:return e.next=6,l.a.load(t);case 6:return n=e.sent,e.abrupt("return",n.createURL());case 10:return e.prev=10,e.t0=e.catch(0),console.warn(e.t0),e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),f=function(e,t){var n=document.querySelectorAll(t);return n&&n.length&&n.forEach((function(t){t.src=e,t.muted=!0})),!!n&&!!n.length},m=function(e,t){return l.a.save(e,t)},p=function(e){var t=Promise.resolve();return e.forEach((function(e){t=t.then((function(){return e()}))})),t},b={"video/embedded":{formats:["mp4","webm"],element:"video",options:{autoplay:!1,muted:!0}},"image/embedded":{formats:["jpg","png","webp","jpeg"],element:"img",options:{}}},v=Object.values(b).reduce((function(e,t){return[].concat(Object(u.a)(e),Object(u.a)(t.formats))}),[]),O=function(e){var t,n;if(!e)return null;var a=null===(t=e.name)||void 0===t||null===(n=t.split("."))||void 0===n?void 0:n.slice(-1)[0],r=Object.entries(b).filter((function(e){var t=Object(o.a)(e,2);t[0];return t[1].formats.includes(a)})),c=Object(o.a)(r,1)[0];if(c){var u=Object(o.a)(c,2),s=u[0],l=u[1];return Object(i.a)({name:s},l)}return null},h=null,j=function(){var e=Object(c.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h){e.next=5;break}return e.next=3,Promise.all([n.e(6),n.e(8)]).then(n.t.bind(null,538,7));case 3:t=e.sent,h=new t.default;case 5:return e.abrupt("return",h);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=function(e){var t,n=e.thumbnailFile,a=e.fileType,r=e.item,c=O(n),i="".concat(null!==(t=null===c||void 0===c?void 0:c.element)&&void 0!==t?t:"img",'[data-torrent="').concat(r.magnetURI,'"]'),o='.dynamic-thumbnail[data-torrent="'.concat(r.magnetURI,'"]');n||"video"!==a.element||(document.querySelector(i).classList.add("hidden"),document.querySelector(o).classList.remove("hidden"))},y=function(e){var t=e.id,n=e.key;return function(e){return"".concat(t,"-").concat(n,"-").concat(e.name)}},k=function(e){var t=e.file,n=e.type,a=e.torrentMode,r=e.torrent,c=n.element,i="".concat(c,'[data-torrent="').concat(r.magnetURI,'"]'),u=document.querySelectorAll(i);console.log("Torrent Elements:",u),u.forEach((function(e){if(!e.classList.contains("hidden")){var c=decodeURIComponent(r.magnetURI.replace(/.*(ws=)/gi,"")),i=n.formats.filter((function(e){return c.toLowerCase().endsWith(".".concat(e.toLowerCase()))})),u=Object(o.a)(i,1)[0];!a&&u?e.setAttribute("src",c):t.renderTo(e,n.options)}}))},E=function(e){var t=e.thumbnailFileNames,n=e.getCacheFileName,a=e.torrentMode;return function(){var e=Object(c.a)(r.a.mark((function e(c){var i,o,u,s,l,m,p,b,v,h,j,y;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=c.fileName,u=c.thumbnails,s=c.item,l=c.fileType,m=o.split(".").slice(0,-1).join("."),p="".concat(m,"-thumb"),b=t.indexOf(p),v=u[b],h=v?O(v):null,j="".concat(null!==(i=null===h||void 0===h?void 0:h.element)&&void 0!==i?i:"img",'[data-torrent="').concat(s.magnetURI,'"]'),"video"!==l.element||!v){e.next=16;break}return e.next=10,d(n(v));case 10:if(!(y=e.sent)){e.next=14;break}return f(y,j),e.abrupt("return");case 14:return k({file:v,type:h,torrentMode:a,torrent:s}),e.abrupt("return");case 16:if("video"!==l.element||v){e.next=19;break}return g({thumbnailFile:v,fileType:l,item:s}),e.abrupt("return");case 19:return e.abrupt("return",{thumbnailFile:v});case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},x=function(){var e=Object(c.a)(r.a.mark((function e(){var t,n,a,i,s=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:[],n=!(s.length>1&&void 0!==s[1])||s[1],e.next=4,Promise.all(t.map(function(){var e=Object(c.a)(r.a.mark((function e(t){var a,i,u,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.contentItems,i=t.id,u=Object.entries(a).filter((function(e){var t=Object(o.a)(e,2)[1];return b[t.type]}))){e.next=4;break}return e.abrupt("return",[]);case 4:return e.next=6,j();case 6:return s=e.sent,e.abrupt("return",u.map((function(e){var t=Object(o.a)(e,2),a=t[0],u=t[1];return function(){return new Promise((function(e){var t=y({id:i,key:a});s.get(u.magnetURI)?e(!0):s.add(u.magnetURI,function(){var a=Object(c.a)(r.a.mark((function a(i){var o,l,p,v;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:e(!0),o=i.files.filter((function(e){var t,n,a=null===(t=e.name)||void 0===t||null===(n=t.split("."))||void 0===n?void 0:n.slice(-1)[0],r=Object.values(b).filter((function(e){return e.formats.includes(a)}))[0];return!!r&&r.formats.includes(a)})),l=o.filter((function(e){return e.name.match(/-thumb\.([\w\d]){2,4}$/gi)})),p=l.map((function(e){return e.name.replace(/\.([\w\d]){2,4}$/gi,"")})),v=E({getCacheFileName:t,thumbnailFileNames:p,torrentMode:n}),o.map(function(){var e=Object(c.a)(r.a.mark((function e(a){var c,i,o,m,b,h;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!p.includes(a.name)){e.next=2;break}return e.abrupt("return");case 2:if(c=O(a)){e.next=5;break}return e.abrupt("return");case 5:return i=t(a),o=c.element,m="".concat(o,'[data-torrent="').concat(u.magnetURI,'"]'),e.next=10,d(i);case 10:if(b=e.sent,v({fileName:a.name,thumbnails:l,fileType:c,item:u}),!b){e.next=17;break}return(h=s.get(u.magnetURI))&&h.destroy(),f(b,m),e.abrupt("return");case 17:k({file:a,type:c,torrentMode:n,torrent:u});case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),i.on("done",(function(){o.map((function(e){var n=O(e),a=t(e),i=n.element,o="".concat(i,'[data-torrent="').concat(u.magnetURI,'"]');e.getBlob(function(){var e=Object(c.a)(r.a.mark((function e(t,n){var c,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=3;break}return console.warn(t),e.abrupt("return");case 3:return console.log("Caching loaded file...",a,n),e.next=6,m(a,n);case 6:if("false"!==(null===(c=document.querySelector(o))||void 0===c?void 0:c.dataset.played)||(null===c||void 0===c?void 0:c.getAttribute("src"))){e.next=12;break}return e.next=10,d(a);case 10:i=e.sent,f(i,o);case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())}))}));case 7:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}())}))}})));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 4:a=e.sent,i=a.reduce((function(e,t){return[].concat(Object(u.a)(e),Object(u.a)(t))}),[]),p(i);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}}]);
//# sourceMappingURL=10.fdab5c12.chunk.js.map