{"version":3,"sources":["common/Post/components/NoticeBar/index.js","common/Post/components/TipRibbon.js","common/Post/components/Video.js","common/Post/components/Image.js","common/Post/components/Stream.js","common/Post/components/ShareBtn.js","common/Post/index.js","common/Post/SharedPost.js"],"names":["NoticeBar","icon","text","visible","className","TipRibbon","tipCounter","tipValue","zoomed","style","opacity","Video","id","item","index","postId","cursor","data-torrent","magnetURI","data-file-key","controls","data-played","Image","useState","setZoomed","zoomLoaded","setZoomLoaded","previewVisible","setPreviewVisible","animationTimer","setAnimationTimer","handleZoomChange","useCallback","value","clearTimeout","timer","setTimeout","Controlled","isZoomed","onZoomChange","overlayBgColorStart","overlayBgColorEnd","alt","onLoad","src","decodeURIComponent","split","STREAM_STATUS_URI","Stream","hideRibbon","width","playerDOM","useRef","isLive","setIsLive","videoStyle","useEffect","recheckInterval","checkStatus","a","seedToken","fetch","res","json","player","videojs","current","autoplay","muted","aspectRatio","type","play","console","log","then","setInterval","clearInterval","display","ref","preload","autoPlay","ShareBtn","publicKey","username","pinned","copiedLink","setCopiedLink","url","useMemo","sharePost","navigator","share","onCopy","getShareMessage","ReactTooltip","rebuild","timeout","tooltipId","data-tip","data-for","effect","backgroundColor","getContent","onClick","Post","timestamp","avatar","openTipModal","contentItems","isOnlineNode","shared","dispatch","useDispatch","useEmblaCarousel","slidesToScroll","align","carouselRef","carouselAPI","sliderLength","setSliderLength","activeSlide","setActiveSlide","liveStatus","setLiveStatus","viewersCounter","setViewersCounter","values","Object","videoContent","find","streamContent","status","parseContent","key","nextSlide","canScrollNext","scrollNext","prevSlide","canScrollPrev","scrollPrev","handleUserKeyDown","e","updateActiveSlide","selectedScrollSnap","fetchPath","path","gunPointer","gunUser","method","data","tipSet","lenSet","length","tot","reduce","acc","val","Number","updateWallPost","postID","on","scrollSnapList","window","addEventListener","removeEventListener","off","tipPost","targetType","ackInfo","Tooltip","to","backgroundImage","moment","utc","fromNow","entries","filter","map","Array","from","_","classNames","scrollTo","SharedPost","sharedPostId","sharerPublicKey","sharerUsername","sharerAvatar","sharedTimestamp","postPublicKey","postLoading","setPostLoading","postContent","setPostContent","postUser","setPostUser","listenPath","callback","loadPost","Promise","all","fetchUserProfile","includeAvatar","getUserPost","userProfile","userPost","attachMedia","date","av1","displayName","alias"],"mappings":"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","file":"static/js/6.ef512ed6.chunk.js","sourcesContent":["import React from \"react\";\nimport \"./css/index.css\";\n\nconst NoticeBar = ({ icon = \"link\", text, visible }) => {\n  if (!visible) {\n    return null;\n  }\n\n  return (\n    <div className=\"notice-bar\">\n      <i className={`fas fa-${icon}`} />\n      {text}\n    </div>\n  );\n};\n\nexport default NoticeBar;\n","import React from \"react\";\n\nconst TipRibbon = ({ tipCounter, tipValue, zoomed }) =>\n  tipValue > 0 ? (\n    <div className=\"ribbon-container\" style={{ opacity: !zoomed ? 1 : 0 }}>\n      <p className=\"ribbon-title\">Total Tips</p>\n      <p className=\"ribbon-value\">\n        {tipCounter} {tipCounter === 1 ? \"Tip\" : \"Tips\"}\n      </p>\n    </div>\n  ) : null;\n\nexport default TipRibbon;\n","import React from \"react\";\nimport TipRibbon from \"./TipRibbon\";\nimport \"../css/index.css\";\n\nconst Video = ({ id, item, index, postId, tipValue, tipCounter }) => {\n  return (\n    <div className=\"media-container\">\n      <div\n        className=\"video-container\"\n        style={{\n          cursor: \"pointer\"\n        }}\n      >\n        <video\n          className={`torrent-video torrent-video-${postId}-${id}`}\n          data-torrent={item.magnetURI}\n          data-file-key={index}\n          controls\n          data-played=\"false\"\n        />\n        <TipRibbon tipCounter={tipCounter} tipValue={tipValue} />\n      </div>\n    </div>\n  );\n};\n\nexport default Video;\n","import React, { useState } from \"react\";\nimport { Controlled as ControlledZoom } from \"react-medium-image-zoom\";\nimport TipRibbon from \"./TipRibbon\";\nimport \"react-medium-image-zoom/dist/styles.css\";\nimport \"../css/index.css\";\nimport { useCallback } from \"react\";\n\nconst IMAGE_TRANSITION_MS = 200;\n\nconst Image = ({ id, item, index, postId, tipValue, tipCounter }) => {\n  const [zoomed, setZoomed] = useState(false);\n  const [zoomLoaded, setZoomLoaded] = useState(false);\n  const [previewVisible, setPreviewVisible] = useState(true);\n  const [animationTimer, setAnimationTimer] = useState(null);\n\n  const handleZoomChange = useCallback(\n    value => {\n      clearTimeout(animationTimer);\n      setZoomed(value);\n      if (!value && zoomLoaded) {\n        setZoomLoaded(false);\n        const timer = setTimeout(() => {\n          setPreviewVisible(true);\n        }, IMAGE_TRANSITION_MS);\n        setAnimationTimer(timer);\n      }\n\n      if (value) {\n        setPreviewVisible(false);\n      }\n    },\n    [animationTimer, zoomLoaded]\n  );\n\n  return (\n    <div className=\"media-container\">\n      <ControlledZoom\n        isZoomed={zoomed}\n        onZoomChange={handleZoomChange}\n        overlayBgColorStart=\"#16191c00\"\n        overlayBgColorEnd=\"#16191c\"\n      >\n        <img\n          className={`torrent-img torrent-img-${postId}-${id}`}\n          alt=\"Post Media\"\n          data-torrent={item.magnetURI}\n          data-file-key={index}\n          style={{ opacity: previewVisible ? 1 : 0 }}\n        />\n        <img\n          className={`enlarged-img enlarged-img-${postId}-${id}`}\n          alt=\"Post Media\"\n          data-file-key={index}\n          onLoad={() => {\n            setZoomLoaded(true);\n          }}\n          style={{ opacity: zoomLoaded ? 1 : 0 }}\n          src={decodeURIComponent(item.magnetURI.split(\"ws=\")[1])}\n        />\n        <TipRibbon\n          tipCounter={tipCounter}\n          tipValue={tipValue}\n          zoomed={zoomed}\n        />\n      </ControlledZoom>\n    </div>\n  );\n};\n\nexport default Image;\n","import React, {    useRef, useEffect,useState } from \"react\";\nimport TipRibbon from \"./TipRibbon\";\nimport videojs from \"video.js\";\n\nconst REACT_APP_SL_SEED_URI = \"https://webtorrent.shock.network\"\nconst STREAM_STATUS_URI = `${REACT_APP_SL_SEED_URI}/rtmpapi/api/streams/live`\n\nconst Stream = ({ id, item, index, postId, tipValue, tipCounter, hideRibbon,width }) => {\n  const playerDOM = useRef(null)\n  const [isLive,setIsLive] = useState(false)\n  const videoStyle = { width:\"100%\"}\n  if(width){\n    videoStyle.width = width\n  }\n  useEffect(() => {\n    if(!item){\n      return\n    }\n    \n    let recheckInterval = null\n    const checkStatus = async () => {\n      try{\n        //TODO regex (?) `${REACT_APP_SL_RTMP_API_URI}/live/${seedToken}/index.m3u8`\n        const [seedToken] = item.magnetURI.split(\"/live/\")[1].split(\"/index.m3u8\") \n        const res = await fetch(`${STREAM_STATUS_URI}/${seedToken}`)\n        const resJ = await res.json()\n        if(!resJ.isLive){\n          return false\n        }\n        const player = videojs(playerDOM.current, {\n          autoplay: true,\n          muted: true,\n          aspectRatio: \"16:9\",\n          \n        });\n        player.src({\n          src: item.magnetURI,\n          type: \"application/x-mpegURL\"\n        });\n        /*listen for 404s from the player\n        player.tech().on('retryplaylist', () => {\n          console.log('retryplaylist');\n        });*/\n        player.play();\n        return true\n      }catch(err){\n        console.log(err)\n        return false\n      }\n    }\n    checkStatus()\n    .then(isLive => {\n      if(isLive){\n        setIsLive(true)\n        return\n      }\n      recheckInterval = setInterval(async ()=> {\n        const isLive = await checkStatus()\n        if(isLive){\n          setIsLive(true)\n          clearInterval(recheckInterval)\n          return\n        }\n      },10000)\n    })\n    \n    return () => {\n      clearInterval(recheckInterval)\n    }\n    \n  },[item])\n  return (\n    <div className=\"media-container w-100\">\n      <div\n        className=\"video-container w-100\"\n        style={{\n          cursor: \"pointer\",\n          width:\"100%\"\n        }}\n      >\n        {!isLive && <p>The streamer has disconnected.</p>}\n        <div style={isLive ? {width:\"100%\"} : {display:'none',width:\"100%\"}}>\n        <video\n          className=\"video-js vjs-default-skin\"\n          ref={playerDOM}\n          style={videoStyle}\n          preload=\"auto\"\n          controls\n          muted\n          autoPlay\n        />\n        </div>\n        {!hideRibbon && <TipRibbon tipCounter={tipCounter} tipValue={tipValue} zoomed={false} />}\n      </div>\n    </div>\n  );\n};\n\nexport default Stream;\n","import React, { useCallback, useEffect, useMemo, useState } from \"react\";\nimport ReactTooltip from \"react-tooltip\";\nimport CopyClipboard from \"react-copy-to-clipboard\";\n\nconst ShareBtn = ({ publicKey, id, username, pinned }) => {\n  const [copiedLink, setCopiedLink] = useState(false);\n  const url = useMemo(\n    () => `https://shock.pub/${publicKey}/post/${id}`,\n    [publicKey, id]\n  );\n\n  const sharePost = useCallback(async () => {\n    if (navigator.share) {\n      navigator.share({\n        text: `Check out this post from ${username} on ShockWallet!`,\n        url\n      });\n      return;\n    }\n  }, [username, url]);\n\n  const onCopy = useCallback(() => {\n    setCopiedLink(true);\n  }, []);\n\n  const getShareMessage = useCallback(\n    () => (copiedLink ? \"Post link copied!\" : \"Share this post\"),\n    [copiedLink]\n  );\n\n  useEffect(() => {\n    ReactTooltip.rebuild();\n    const timeout = setTimeout(() => {\n      setCopiedLink(false);\n      ReactTooltip.rebuild();\n    }, 1000);\n\n    return () => {\n      clearTimeout(timeout);\n    };\n  }, [copiedLink]);\n\n  useEffect(() => {\n    ReactTooltip.rebuild();\n  }, []);\n\n  if (!navigator.share) {\n    const tooltipId = `share-${publicKey}-${pinned ? \"pinned\" : \"\"}-${id}`;\n    return (\n      <CopyClipboard text={url} onCopy={onCopy}>\n        <div className=\"share-btn-container\">\n          <div\n            className=\"share-btn\"\n            data-tip={getShareMessage()}\n            data-for={tooltipId}\n          >\n            <i className=\"fas fa-external-link-alt\"></i>\n          </div>\n          <ReactTooltip\n            effect=\"solid\"\n            backgroundColor=\"#3a4d67\"\n            getContent={[getShareMessage, 30]}\n            id={tooltipId}\n          />\n        </div>\n      </CopyClipboard>\n    );\n  }\n\n  return (\n    <div className=\"share-btn\" onClick={sharePost}>\n      <i className=\"fas fa-external-link-alt\"></i>\n    </div>\n  );\n};\n\nexport default ShareBtn;\n","import React, { useEffect, useCallback, useState } from \"react\";\nimport moment from \"moment\";\nimport Tooltip from \"react-tooltip\";\nimport { useDispatch } from \"react-redux\";\nimport { useEmblaCarousel } from \"embla-carousel/react\";\nimport classNames from \"classnames\";\nimport { Link } from \"react-router-dom\";\nimport { updateWallPost } from \"../../actions/UserActions\";\nimport \"./css/index.css\";\nimport { gunUser, fetchPath } from \"../../utils/Gun\";\nimport Video from \"./components/Video\";\nimport Image from \"./components/Image\";\nimport Stream from \"./components/Stream\";\nimport NoticeBar from \"./components/NoticeBar\";\nimport ShareBtn from \"./components/ShareBtn\";\n\nconst Post = ({\n  id,\n  timestamp,\n  avatar,\n  tipCounter,\n  tipValue,\n  publicKey,\n  openTipModal,\n  contentItems = {},\n  username,\n  isOnlineNode,\n  shared,\n  pinned\n}) => {\n  const dispatch = useDispatch();\n  const [carouselRef, carouselAPI] = useEmblaCarousel({\n    slidesToScroll: 1,\n    align: \"center\"\n  });\n\n  const [sliderLength, setSliderLength] = useState(0);\n  const [activeSlide, setActiveSlide] = useState(0);\n  const [liveStatus,setLiveStatus] = useState('')\n  const [viewersCounter, setViewersCounter] = useState(0);\n\n  //effect for liveStatus and viewers counter\n  useEffect(() =>{\n    const values = Object.values(contentItems)\n    const videoContent = values.find(item => item.type === 'video/embedded' && item.liveStatus === 'wasLive')\n    const streamContent = values.find(item => item.type === 'stream/embedded' && item.liveStatus === 'live')\n    let status = ''\n    if(videoContent){\n      status = \"Was Live\"\n    }\n    if(streamContent){\n      status = \"Is Live\"\n      if(streamContent.viewersCounter){\n        setViewersCounter(streamContent.viewersCounter)\n      }\n    }\n    if(status){\n      setLiveStatus(status)\n    }\n  },[contentItems,setLiveStatus])\n  \n  const getMediaContent = () => {\n    return Object.entries(contentItems).filter(\n      ([_, item]) => item.type !== \"text/paragraph\"\n    );\n  };\n\n  const getTextContent = () => {\n    return Object.entries(contentItems).filter(\n      ([_, item]) => item.type === \"text/paragraph\"\n    );\n  };\n\n  const parseContent = ([key, item], index) => {\n    if (item.type === \"text/paragraph\") {\n      return <p key={key}>{item.text}</p>;\n    }\n\n    if (item.type === \"image/embedded\") {\n      return (\n        <Image\n          id={key}\n          item={item}\n          index={index}\n          postId={id}\n          tipCounter={tipCounter}\n          tipValue={tipValue}\n          key={`${id}-${index}`}\n        />\n      );\n    }\n\n    if (item.type === \"video/embedded\") {\n      return (\n        <Video\n          id={key}\n          item={item}\n          index={index}\n          postId={id}\n          tipCounter={tipCounter}\n          tipValue={tipValue}\n          key={`${id}-${index}`}\n        />\n      );\n    }\n\n    if (item.type === \"stream/embedded\") {\n      return (\n        <Stream\n          id={key}\n          item={item}\n          index={index}\n          postId={id}\n          tipCounter={tipCounter}\n          tipValue={tipValue}\n          key={`${id}-${index}`}\n        />\n      );\n    }\n\n    return null;\n  };\n\n  const nextSlide = useCallback(() => {\n    if (!carouselAPI) return;\n\n    if (carouselAPI.canScrollNext()) {\n      carouselAPI.scrollNext();\n    }\n  }, [carouselAPI]);\n\n  const prevSlide = useCallback(() => {\n    if (!carouselAPI) return;\n\n    if (carouselAPI.canScrollPrev()) {\n      carouselAPI.scrollPrev();\n    }\n  }, [carouselAPI]);\n\n  const handleUserKeyDown = useCallback(\n    e => {\n      if (sliderLength === 0) return;\n      const { key } = e;\n\n      if (key === \"ArrowRight\") {\n        nextSlide();\n      }\n\n      if (key === \"ArrowLeft\") {\n        prevSlide();\n      }\n    },\n    [sliderLength, prevSlide, nextSlide]\n  );\n\n  const updateActiveSlide = useCallback(() => {\n    setActiveSlide(carouselAPI.selectedScrollSnap());\n  }, [carouselAPI, setActiveSlide]);\n\n  useEffect(() => {\n    fetchPath({\n      path: `posts/${id}/tipsSet`,\n      gunPointer: gunUser(publicKey),\n      method: \"load\"\n    }).then(data => {\n      const tipSet = data ? Object.values(data) : [];\n      const lenSet = tipSet.length;\n      const tot =\n        lenSet > 0 ? tipSet.reduce((acc, val) => Number(val) + Number(acc)) : 0;\n      dispatch(\n        updateWallPost({\n          postID: id,\n          data: {\n            tipValue: tot,\n            tipCounter: lenSet\n          }\n        })\n      );\n    });\n  }, [dispatch, id, publicKey]);\n\n  useEffect(() => {\n    if (!carouselAPI) return;\n\n    carouselAPI.on(\"scroll\", updateActiveSlide);\n    setSliderLength(carouselAPI.scrollSnapList().length);\n    window.addEventListener(\"keydown\", handleUserKeyDown);\n\n    return () => {\n      window.removeEventListener(\"keydown\", handleUserKeyDown);\n      carouselAPI.off(\"scroll\", updateActiveSlide);\n    };\n  }, [carouselAPI, sliderLength, handleUserKeyDown, updateActiveSlide]);\n\n  const tipPost = useCallback(() => {\n    if (!isOnlineNode) {\n      return;\n    }\n\n    openTipModal({\n      targetType: \"tip\",\n      ackInfo: id\n    });\n  }, [id, isOnlineNode, openTipModal]);\n\n  useEffect(() => {\n    Tooltip.rebuild();\n  }, []);\n\n  return (\n    <div className=\"post\">\n      <NoticeBar text=\"Linked post\" visible={pinned && !shared} />\n      <div className=\"head\">\n        <div className=\"user\">\n          <Link\n            className=\"av\"\n            to={`/${publicKey}`}\n            style={{\n              backgroundImage: `url(${avatar})`\n            }}\n          />\n          <div className=\"details\">\n            <div className=\"username\">\n              <Link to={`/otherUser/${publicKey}`}>{username}</Link>\n              {liveStatus && <p className=\"liveStatus\">\n                {liveStatus} \n                <i className={`fas fa-circle liveStatusIcon ${liveStatus === 'Is Live' ? \"liveIcon\" : \"\"}`}></i>\n                {liveStatus === 'Is Live' &&  <span> | {viewersCounter} watching</span>}\n                </p>\n              }\n            </div>\n            <p>{moment.utc(timestamp).fromNow()}</p>\n          </div>\n        </div>\n        <ShareBtn\n          publicKey={publicKey}\n          id={id}\n          username={username}\n          pinned={pinned}\n        />\n      </div>\n\n      <div className=\"content\">\n        {getTextContent().map(parseContent)}\n        <div className=\"media-content-carousel\">\n          {sliderLength > 1 ? (\n            <div className=\"media-carousel-controls-container\">\n              <div\n                className=\"media-carousel-arrow fas fa-angle-left\"\n                onClick={prevSlide}\n              ></div>\n              <div className=\"media-carousel-pages\">\n                {Array.from({ length: sliderLength }).map((_, key) => (\n                  <div\n                    className={classNames({\n                      \"media-carousel-page\": true,\n                      \"active-carousel-page\": activeSlide === key\n                    })}\n                    onClick={() => carouselAPI?.scrollTo(key)}\n                  ></div>\n                ))}\n              </div>\n              <div\n                className=\"media-carousel-arrow fas fa-angle-right\"\n                onClick={nextSlide}\n              ></div>\n            </div>\n          ) : null}\n          <div className=\"media-content-root\" ref={carouselRef}>\n            <div className=\"media-content-container\">\n              {getMediaContent().map(parseContent)}\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"actions\">\n        <div\n          className=\"icon-tip-btn\"\n          data-tip=\"Tip this post\"\n          onClick={tipPost}\n        >\n          <i className=\"tip-icon icon-thin-feed\"></i>\n        </div>\n        {/* <div\n          className=\"tip-btn-container\"\n          onClick={tipPost}\n          data-tip={\n            isOnlineNode\n              ? tipCounter > 0\n                ? `${tipValue} Sats tipped so far`\n                : null\n              : \"You can only tip online users\"\n          }\n          style={{\n            opacity: isOnlineNode ? 1 : 0.5,\n            cursor: isOnlineNode ? \"pointer\" : \"default\"\n          }}\n        >\n          <div className=\"tip-btn-icon\">\n            <img src={lightning} alt=\"Send Tip\" />\n          </div>\n          <div className=\"tip-btn-text\">\n            <Counter value={tipCounter} /> {tipCounter === 1 ? \"Tip\" : \"Tips\"}\n          </div>\n        </div> */}\n        <Tooltip backgroundColor=\"#3a4d67\" effect=\"solid\" />\n      </div>\n    </div>\n  );\n};\n\nexport default Post;\n","import React, { useEffect, useCallback, useState } from \"react\";\nimport moment from \"moment\";\nimport Tooltip from \"react-tooltip\";\nimport { useDispatch } from \"react-redux\";\nimport {\n  updateWallPost,\n  getUserPost,\n  fetchUserProfile\n} from \"../../actions/UserActions\";\nimport { listenPath, gunUser } from \"../../utils/Gun\";\n\nimport Post from \".\";\n\nimport av1 from \"../../images/av1.jpg\";\nimport \"../Post/css/index.css\";\nimport { attachMedia } from \"../../utils/Torrents\";\nimport Loader from \"../Loader\";\nimport NoticeBar from \"./components/NoticeBar\";\n\nconst SharedPost = ({\n  sharedPostId,\n  sharerPublicKey,\n  sharerUsername,\n  sharerAvatar,\n  sharedTimestamp,\n  isOnlineNode,\n  postID,\n  postPublicKey,\n  openTipModal,\n  pinned\n}) => {\n  const dispatch = useDispatch();\n  const [postLoading, setPostLoading] = useState(true);\n  const [postContent, setPostContent] = useState(null);\n  const [postUser, setPostUser] = useState(null);\n\n  useEffect(() => {\n    listenPath({\n      path: `posts/${sharedPostId}/tipCounter`,\n      gunPointer: gunUser(sharerPublicKey),\n      callback: data => {\n        dispatch(\n          updateWallPost({\n            postID: sharedPostId,\n            data: {\n              tipCounter: data\n            }\n          })\n        );\n      }\n    });\n    listenPath({\n      path: `posts/${sharedPostId}/tipValue`,\n      gunPointer: gunUser(sharerPublicKey),\n      callback: data => {\n        dispatch(\n          updateWallPost({\n            postID: sharedPostId,\n            data: {\n              tipValue: data\n            }\n          })\n        );\n      }\n    });\n  }, [dispatch, sharedPostId, sharerPublicKey]);\n\n  const loadPost = useCallback(async () => {\n    setPostLoading(true);\n    if (!postPublicKey) return;\n    const [userProfile, userPost] = await Promise.all([\n      fetchUserProfile({ publicKey: postPublicKey, includeAvatar: true }),\n      getUserPost({\n        id: postID,\n        gunPointer: gunUser(postPublicKey)\n      })\n    ]);\n    setPostUser(userProfile);\n    setPostContent(userPost);\n    setPostLoading(false);\n    attachMedia([userPost], false);\n  }, [postID, postPublicKey]);\n\n  useEffect(() => {\n    Tooltip.rebuild();\n    loadPost();\n  }, [loadPost]);\n\n  return (\n    <div className=\"post shared-post\">\n      <NoticeBar text=\"Linked post\" visible={pinned} />\n      <div className=\"head\">\n        <div className=\"user\">\n          <div\n            className=\"av\"\n            style={{\n              backgroundImage: `url(${sharerAvatar})`\n            }}\n          ></div>\n          <div className=\"details\">\n            <p>{sharerUsername}</p>\n            <p>{moment.utc(sharedTimestamp).fromNow()}</p>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"shared-content\">\n        {postLoading ? (\n          <Loader text=\"Loading Post...\" />\n        ) : postContent && postUser ? (\n          <Post\n            id={postContent.id}\n            timestamp={postContent.date}\n            avatar={\n              postUser.avatar ? `data:image/png;base64,${postUser.avatar}` : av1\n            }\n            tipCounter={postContent.tipCounter}\n            tipValue={postContent.tipValue}\n            publicKey={postPublicKey}\n            openTipModal={openTipModal}\n            contentItems={postContent.contentItems}\n            username={postUser.displayName ?? postUser.alias}\n            isOnlineNode={isOnlineNode}\n            shared={true}\n            pinned={pinned}\n          />\n        ) : null}\n      </div>\n    </div>\n  );\n};\n\nexport default SharedPost;\n"],"sourceRoot":""}