{"version":3,"sources":["common/Post/components/TipRibbon.js","common/Post/components/Video.js","common/Post/components/Image.js","common/Post/index.js","common/Post/SharedPost.js"],"names":["TipRibbon","tipCounter","tipValue","zoomed","className","style","opacity","Video","id","item","index","postId","cursor","data-torrent","magnetURI","data-file-key","controls","data-played","Image","useState","setZoomed","zoomLoaded","setZoomLoaded","previewVisible","setPreviewVisible","animationTimer","setAnimationTimer","handleZoomChange","useCallback","value","clearTimeout","timer","setTimeout","Controlled","isZoomed","onZoomChange","overlayBgColorStart","overlayBgColorEnd","alt","onLoad","src","decodeURIComponent","split","Post","timestamp","avatar","publicKey","openTipModal","contentItems","username","isOnlineNode","dispatch","useDispatch","useEmblaCarousel","slidesToScroll","align","carouselRef","carouselAPI","sliderLength","setSliderLength","activeSlide","setActiveSlide","parseContent","key","type","text","nextSlide","canScrollNext","scrollNext","prevSlide","canScrollPrev","scrollPrev","handleUserKeyDown","e","updateActiveSlide","selectedScrollSnap","useEffect","listenPath","path","gunPointer","gunUser","callback","data","updateWallPost","postID","on","scrollSnapList","length","window","addEventListener","removeEventListener","off","tipPost","targetType","Tooltip","rebuild","to","backgroundImage","moment","utc","fromNow","Object","entries","filter","map","onClick","Array","from","_","classNames","scrollTo","ref","data-tip","SharedPost","sharedPostId","sharerPublicKey","sharerUsername","sharerAvatar","sharedTimestamp","postPublicKey","postLoading","setPostLoading","postContent","setPostContent","postUser","setPostUser","loadPost","a","Promise","all","fetchUserProfile","includeAvatar","getUserPost","userProfile","userPost","attachMedia","date","av1","displayName","alias"],"mappings":"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","file":"static/js/6.d00bbffc.chunk.js","sourcesContent":["import React from \"react\";\n\nconst TipRibbon = ({ tipCounter, tipValue, zoomed }) =>\n  tipValue > 0 ? (\n    <div className=\"ribbon-container\" style={{ opacity: !zoomed ? 1 : 0 }}>\n      <p className=\"ribbon-title\">Total Tips</p>\n      <p className=\"ribbon-value\">\n        {tipCounter} {tipCounter === 1 ? \"Tip\" : \"Tips\"}\n      </p>\n    </div>\n  ) : null;\n\nexport default TipRibbon;\n","import React from \"react\";\nimport TipRibbon from \"./TipRibbon\";\nimport \"../css/index.css\";\n\nconst Video = ({ id, item, index, postId, tipValue, tipCounter }) => {\n  return (\n    <div className=\"media-container\">\n      <div\n        className=\"video-container\"\n        style={{\n          cursor: \"pointer\"\n        }}\n      >\n        <video\n          className={`torrent-video torrent-video-${postId}-${id}`}\n          data-torrent={item.magnetURI}\n          data-file-key={index}\n          controls\n          data-played=\"false\"\n        />\n        <TipRibbon tipCounter={tipCounter} tipValue={tipValue} />\n      </div>\n    </div>\n  );\n};\n\nexport default Video;\n","import React, { useState } from \"react\";\nimport { Controlled as ControlledZoom } from \"react-medium-image-zoom\";\nimport TipRibbon from \"./TipRibbon\";\nimport \"react-medium-image-zoom/dist/styles.css\";\nimport \"../css/index.css\";\nimport { useCallback } from \"react\";\n\nconst IMAGE_TRANSITION_MS = 200;\n\nconst Image = ({ id, item, index, postId, tipValue, tipCounter }) => {\n  const [zoomed, setZoomed] = useState(false);\n  const [zoomLoaded, setZoomLoaded] = useState(false);\n  const [previewVisible, setPreviewVisible] = useState(true);\n  const [animationTimer, setAnimationTimer] = useState(null);\n\n  const handleZoomChange = useCallback(\n    value => {\n      clearTimeout(animationTimer);\n      setZoomed(value);\n      if (!value && zoomLoaded) {\n        setZoomLoaded(false);\n        const timer = setTimeout(() => {\n          setPreviewVisible(true);\n        }, IMAGE_TRANSITION_MS);\n        setAnimationTimer(timer);\n      }\n\n      if (value) {\n        setPreviewVisible(false);\n      }\n    },\n    [animationTimer, zoomLoaded]\n  );\n\n  return (\n    <div className=\"media-container\">\n      <ControlledZoom\n        isZoomed={zoomed}\n        onZoomChange={handleZoomChange}\n        overlayBgColorStart=\"#16191c00\"\n        overlayBgColorEnd=\"#16191c\"\n      >\n        <img\n          className={`torrent-img torrent-img-${postId}-${id}`}\n          alt=\"Post Media\"\n          data-torrent={item.magnetURI}\n          data-file-key={index}\n          style={{ opacity: previewVisible ? 1 : 0 }}\n        />\n        <img\n          className={`enlarged-img enlarged-img-${postId}-${id}`}\n          alt=\"Post Media\"\n          data-file-key={index}\n          onLoad={() => {\n            setZoomLoaded(true);\n          }}\n          style={{ opacity: zoomLoaded ? 1 : 0 }}\n          src={decodeURIComponent(item.magnetURI.split(\"ws=\")[1])}\n        />\n        <TipRibbon\n          tipCounter={tipCounter}\n          tipValue={tipValue}\n          zoomed={zoomed}\n        />\n      </ControlledZoom>\n    </div>\n  );\n};\n\nexport default Image;\n","import React, { useEffect, useCallback, useState } from \"react\";\nimport moment from \"moment\";\nimport Tooltip from \"react-tooltip\";\nimport { useDispatch } from \"react-redux\";\nimport { useEmblaCarousel } from \"embla-carousel/react\";\nimport classNames from \"classnames\";\nimport { updateWallPost } from \"../../actions/UserActions\";\nimport \"./css/index.css\";\nimport { listenPath, gunUser } from \"../../utils/Gun\";\nimport Video from \"./components/Video\";\nimport Image from \"./components/Image\";\nimport { Link } from \"react-router-dom\";\n\nconst Post = ({\n  id,\n  timestamp,\n  avatar,\n  tipCounter,\n  tipValue,\n  publicKey,\n  openTipModal,\n  contentItems = {},\n  username,\n  isOnlineNode\n}) => {\n  const dispatch = useDispatch();\n  const [carouselRef, carouselAPI] = useEmblaCarousel({\n    slidesToScroll: 1,\n    align: \"center\"\n  });\n\n  const [sliderLength, setSliderLength] = useState(0);\n  const [activeSlide, setActiveSlide] = useState(0);\n\n  const getMediaContent = () => {\n    return Object.entries(contentItems).filter(\n      ([_, item]) => item.type !== \"text/paragraph\"\n    );\n  };\n\n  const getTextContent = () => {\n    return Object.entries(contentItems).filter(\n      ([_, item]) => item.type === \"text/paragraph\"\n    );\n  };\n\n  const parseContent = ([key, item], index) => {\n    if (item.type === \"text/paragraph\") {\n      return <p key={key}>{item.text}</p>;\n    }\n\n    if (item.type === \"image/embedded\") {\n      return (\n        <Image\n          id={key}\n          item={item}\n          index={index}\n          postId={id}\n          tipCounter={tipCounter}\n          tipValue={tipValue}\n          key={`${id}-${index}`}\n        />\n      );\n    }\n\n    if (item.type === \"video/embedded\") {\n      return (\n        <Video\n          id={key}\n          item={item}\n          index={index}\n          postId={id}\n          tipCounter={tipCounter}\n          tipValue={tipValue}\n          key={`${id}-${index}`}\n        />\n      );\n    }\n\n    return null;\n  };\n\n  // useEffect(() => {\n  //   attachMedia();\n  // }, [contentItems.length]);\n\n  const nextSlide = useCallback(() => {\n    if (!carouselAPI) return;\n\n    if (carouselAPI.canScrollNext()) {\n      carouselAPI.scrollNext();\n    }\n  }, [carouselAPI]);\n\n  const prevSlide = useCallback(() => {\n    if (!carouselAPI) return;\n\n    if (carouselAPI.canScrollPrev()) {\n      carouselAPI.scrollPrev();\n    }\n  }, [carouselAPI]);\n\n  const handleUserKeyDown = useCallback(\n    e => {\n      if (sliderLength === 0) return;\n      const { key } = e;\n\n      if (key === \"ArrowRight\") {\n        nextSlide();\n      }\n\n      if (key === \"ArrowLeft\") {\n        prevSlide();\n      }\n    },\n    [sliderLength, prevSlide, nextSlide]\n  );\n\n  const updateActiveSlide = useCallback(() => {\n    setActiveSlide(carouselAPI.selectedScrollSnap());\n  }, [carouselAPI, setActiveSlide]);\n\n  useEffect(() => {\n    listenPath({\n      path: `posts/${id}/tipCounter`,\n      gunPointer: gunUser(publicKey),\n      callback: data => {\n        dispatch(\n          updateWallPost({\n            postID: id,\n            data: {\n              tipCounter: data\n            }\n          })\n        );\n      }\n    });\n    listenPath({\n      path: `posts/${id}/tipValue`,\n      gunPointer: gunUser(publicKey),\n      callback: data => {\n        dispatch(\n          updateWallPost({\n            postID: id,\n            data: {\n              tipValue: data\n            }\n          })\n        );\n      }\n    });\n  }, [dispatch, id, publicKey]);\n\n  useEffect(() => {\n    if (!carouselAPI) return;\n\n    carouselAPI.on(\"scroll\", updateActiveSlide);\n    setSliderLength(carouselAPI.scrollSnapList().length);\n    window.addEventListener(\"keydown\", handleUserKeyDown);\n\n    return () => {\n      window.removeEventListener(\"keydown\", handleUserKeyDown);\n      carouselAPI.off(\"scroll\", updateActiveSlide);\n    };\n  }, [carouselAPI, sliderLength, handleUserKeyDown, updateActiveSlide]);\n\n  const tipPost = useCallback(() => {\n    if (!isOnlineNode) {\n      return;\n    }\n\n    openTipModal({\n      targetType: \"post\",\n      postID: id\n    });\n  }, [id, isOnlineNode, openTipModal]);\n\n  useEffect(() => {\n    Tooltip.rebuild();\n  }, []);\n\n  return (\n    <div className=\"post\">\n      <div className=\"head\">\n        <div className=\"user\">\n          <Link\n            className=\"av\"\n            to={`/${publicKey}`}\n            style={{\n              backgroundImage: `url(${avatar})`\n            }}\n          />\n          <div className=\"details\">\n            <Link to={`/${publicKey}`}>{username}</Link>\n            <p>{moment.utc(timestamp).fromNow()}</p>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"content\">\n        {getTextContent().map(parseContent)}\n        <div className=\"media-content-carousel\">\n          {sliderLength > 1 ? (\n            <div className=\"media-carousel-controls-container\">\n              <div\n                className=\"media-carousel-arrow fas fa-angle-left\"\n                onClick={prevSlide}\n              ></div>\n              <div className=\"media-carousel-pages\">\n                {Array.from({ length: sliderLength }).map((_, key) => (\n                  <div\n                    className={classNames({\n                      \"media-carousel-page\": true,\n                      \"active-carousel-page\": activeSlide === key\n                    })}\n                    onClick={() => carouselAPI?.scrollTo(key)}\n                  ></div>\n                ))}\n              </div>\n              <div\n                className=\"media-carousel-arrow fas fa-angle-right\"\n                onClick={nextSlide}\n              ></div>\n            </div>\n          ) : null}\n          <div className=\"media-content-root\" ref={carouselRef}>\n            <div className=\"media-content-container\">\n              {getMediaContent().map(parseContent)}\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"actions\">\n        <div\n          className=\"icon-tip-btn\"\n          data-tip=\"Tip this post\"\n          onClick={tipPost}\n        >\n          <div className=\"tip-icon icon-thin-feed\"></div>\n        </div>\n        {/* <div\n          className=\"tip-btn-container\"\n          onClick={tipPost}\n          data-tip={\n            isOnlineNode\n              ? tipCounter > 0\n                ? `${tipValue} Sats tipped so far`\n                : null\n              : \"You can only tip online users\"\n          }\n          style={{\n            opacity: isOnlineNode ? 1 : 0.5,\n            cursor: isOnlineNode ? \"pointer\" : \"default\"\n          }}\n        >\n          <div className=\"tip-btn-icon\">\n            <img src={lightning} alt=\"Send Tip\" />\n          </div>\n          <div className=\"tip-btn-text\">\n            <Counter value={tipCounter} /> {tipCounter === 1 ? \"Tip\" : \"Tips\"}\n          </div>\n        </div> */}\n      </div>\n    </div>\n  );\n};\n\nexport default Post;\n","import React, { useEffect, useCallback, useState } from \"react\";\nimport moment from \"moment\";\nimport Tooltip from \"react-tooltip\";\nimport { useDispatch } from \"react-redux\";\nimport {\n  updateWallPost,\n  getUserPost,\n  fetchUserProfile\n} from \"../../actions/UserActions\";\nimport { listenPath, gunUser, Gun } from \"../../utils/Gun\";\n\nimport Post from \".\";\n\nimport av1 from \"../../images/av1.jpg\";\nimport \"../Post/css/index.css\";\nimport { attachMedia } from \"../../utils/Torrents\";\nimport Loader from \"../Loader\";\n\nconst SharedPost = ({\n  sharedPostId,\n  sharerPublicKey,\n  sharerUsername,\n  sharerAvatar,\n  sharedTimestamp,\n  isOnlineNode,\n  postID,\n  postPublicKey,\n  openTipModal\n}) => {\n  const dispatch = useDispatch();\n  const [postLoading, setPostLoading] = useState(true);\n  const [postContent, setPostContent] = useState(null);\n  const [postUser, setPostUser] = useState(null);\n\n  useEffect(() => {\n    listenPath({\n      path: `posts/${sharedPostId}/tipCounter`,\n      gunPointer: gunUser(sharerPublicKey),\n      callback: data => {\n        dispatch(\n          updateWallPost({\n            postID: sharedPostId,\n            data: {\n              tipCounter: data\n            }\n          })\n        );\n      }\n    });\n    listenPath({\n      path: `posts/${sharedPostId}/tipValue`,\n      gunPointer: gunUser(sharerPublicKey),\n      callback: data => {\n        dispatch(\n          updateWallPost({\n            postID: sharedPostId,\n            data: {\n              tipValue: data\n            }\n          })\n        );\n      }\n    });\n  }, [dispatch, sharedPostId, sharerPublicKey]);\n\n  const loadPost = useCallback(async () => {\n    setPostLoading(true);\n    if (!postPublicKey) return;\n    const [userProfile, userPost] = await Promise.all([\n      fetchUserProfile({ publicKey: postPublicKey, includeAvatar: true }),\n      getUserPost({\n        id: postID,\n        gunPointer: gunUser(postPublicKey)\n      })\n    ]);\n    setPostUser(userProfile);\n    setPostContent(userPost);\n    setPostLoading(false);\n    attachMedia([userPost], false);\n  }, [postID, postPublicKey]);\n\n  useEffect(() => {\n    Tooltip.rebuild();\n    loadPost();\n  }, [loadPost]);\n\n  return (\n    <div className=\"post shared-post\">\n      <div className=\"head\">\n        <div className=\"user\">\n          <div\n            className=\"av\"\n            style={{\n              backgroundImage: `url(${sharerAvatar})`\n            }}\n          ></div>\n          <div className=\"details\">\n            <p>{sharerUsername}</p>\n            <p>{moment.utc(sharedTimestamp).fromNow()}</p>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"shared-content\">\n        {postLoading ? (\n          <Loader text=\"Loading Post...\" />\n        ) : postContent && postUser ? (\n          <Post\n            id={postContent.id}\n            timestamp={postContent.date}\n            avatar={\n              postUser.avatar ? `data:image/png;base64,${postUser.avatar}` : av1\n            }\n            tipCounter={postContent.tipCounter}\n            tipValue={postContent.tipValue}\n            publicKey={postPublicKey}\n            openTipModal={openTipModal}\n            contentItems={postContent.contentItems}\n            username={postUser.displayName ?? postUser.alias}\n            isOnlineNode={isOnlineNode}\n          />\n        ) : null}\n      </div>\n\n      {/* <div className=\"actions\">\n        <div\n          className=\"icon-tip-btn\"\n          data-tip=\"Tip this post\"\n          onClick={tipPost}\n        >\n          <div className=\"tip-icon icon-thin-feed\"></div>\n        </div>\n      </div> */}\n    </div>\n  );\n};\n\nexport default SharedPost;\n"],"sourceRoot":""}