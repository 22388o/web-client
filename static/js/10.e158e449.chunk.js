(this["webpackJsonpshockwallet-web"]=this["webpackJsonpshockwallet-web"]||[]).push([[10],{114:function(e,t,n){e.exports=n.p+"static/media/av1.48bf5c6a.jpg"},121:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var a=n(17),r=n(2),c=n.n(r),o=n(6),i=n(3),s=n(8),u=n(162),l=n.n(u),f=function(){var e=Object(o.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,l.a._init){e.next=4;break}return e.next=4,new Promise((function(e,t){l.a.init("ShockWalletStore").then((function(){return console.log("File cache initialized!"),l.a.persist()})).then((function(n){n.persistent?e(n):t(n)}))}));case 4:return e.next=6,l.a.load(t);case 6:return n=e.sent,e.abrupt("return",n.createURL());case 10:return e.prev=10,e.t0=e.catch(0),console.warn(e.t0),e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),p=function(e,t){var n=document.querySelectorAll(t);return n&&n.length&&n.forEach((function(t){t.src=e,t.muted=!0,t.autoplay=!0})),!!n&&!!n.length},d=function(e,t){return l.a.save(e,t)},m=function(e){var t=Promise.resolve();return e.forEach((function(e){t=t.then((function(){return e()}))})),t},b={"video/embedded":{formats:["mp4","webm"],element:"video",options:{autoplay:!0,muted:!0}},"image/embedded":{formats:["jpg","png","webp","jpeg"],element:"img",options:{}}},v=function(e){var t,n,a=null===(t=e.name)||void 0===t||null===(n=t.split("."))||void 0===n?void 0:n.slice(-1)[0],r=Object.entries(b).filter((function(e){var t=Object(s.a)(e,2);t[0];return t[1].formats.includes(a)})),c=Object(s.a)(r,1)[0];if(c){var o=Object(s.a)(c,2),u=o[0],l=o[1];return Object(i.a)({name:u},l)}return null},O=null,j=function(){var e=Object(o.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(O){e.next=5;break}return e.next=3,Promise.all([n.e(6),n.e(8)]).then(n.t.bind(null,536,7));case 3:t=e.sent,O=new t.default;case 5:return e.abrupt("return",O);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=Object(o.a)(c.a.mark((function e(){var t,n,r,i=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=i.length>0&&void 0!==i[0]?i[0]:[],n=!(i.length>1&&void 0!==i[1])||i[1],r=t.map((function(e){var t=e.contentItems,a=e.id,r=Object.entries(t).filter((function(e){var t=Object(s.a)(e,2)[1];return b[t.type]}));return r?r.map((function(e){var t=Object(s.a)(e,2),r=t[0],i=t[1];return function(){return new Promise((function(e){j().then((function(t){t.get(i.magnetURI)?e(!0):t.add(i.magnetURI,function(){var u=Object(o.a)(c.a.mark((function u(l){var m;return c.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:e(!0),(m=l.files.filter((function(e){var t,n,a=null===(t=e.name)||void 0===t||null===(n=t.split("."))||void 0===n?void 0:n.slice(-1)[0],r=Object.entries(b).filter((function(e){return Object(s.a)(e,2)[1].formats.includes(a)}))[0];return!!r&&Object(s.a)(r,2)[1].formats.includes(a)}))).map(function(){var e=Object(o.a)(c.a.mark((function e(o){var u,l,d,m,b,O,j;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=v(o)){e.next=3;break}return e.abrupt("return");case 3:return l="".concat(a,"-").concat(r,"-").concat(o.name),d=u.element,m="".concat(d,'[data-torrent="').concat(i.magnetURI,'"]'),e.next=8,f(l);case 8:if(!(b=e.sent)){e.next=14;break}return(O=t.get(i.magnetURI))&&O.destroy(),p(b,m),e.abrupt("return");case 14:j=document.querySelectorAll(m),console.log("Torrent Elements:",j),j.forEach((function(e){var t=decodeURIComponent(i.magnetURI.replace(/.*(ws=)/gi,"")),a=u.formats.filter((function(e){return t.toLowerCase().endsWith(".".concat(e.toLowerCase()))})),r=Object(s.a)(a,1)[0];!n&&r?e.setAttribute("src",t):o.renderTo(e,u.options)}));case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),l.on("done",(function(){m.map((function(e){var t=v(e),n="".concat(a,"-").concat(r,"-").concat(e.name),s=t.element,u="".concat(s,'[data-torrent="').concat(i.magnetURI,'"]');e.getBlob(function(){var e=Object(o.a)(c.a.mark((function e(t,a){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=3;break}return console.warn(t),e.abrupt("return");case 3:return console.log("Caching loaded file...",n,a),e.next=6,d(n,a);case 6:if("false"!==document.querySelector(u).dataset.played){e.next=12;break}return e.next=10,f(n);case 10:r=e.sent,p(r,u);case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())}))}));case 4:case"end":return u.stop()}}),u)})));return function(e){return u.apply(this,arguments)}}())}))}))}})):[]})).reduce((function(e,t){return[].concat(Object(a.a)(e),Object(a.a)(t))}),[]),m(r);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},129:function(e,t,n){"use strict";var a=n(8),r=n(0),c=n(32),o=n(113),i=n.n(o),s=n(1);t.a=function(e){var t=Object(c.b)(),n=Object(c.c)((function(e){return e.user.profile})),o=Object(r.useState)(!1),u=Object(a.a)(o,2),l=u[0],f=u[1],p=Object(r.useState)(!1),d=Object(a.a)(p,2),m=d[0],b=d[1],v=Object(r.useState)(!1),O=Object(a.a)(v,2),j=O[0],g=O[1],h=Object(r.useState)(!1),E=Object(a.a)(h,2),k=E[0],y=E[1],w=Object(r.useState)(),x=Object(a.a)(w,2),N=x[0],P=x[1],S=Object(r.useCallback)((function(){var e=i.a.utc().subtract(1,"minutes"),t=i.a.utc(m).isSameOrAfter(e),n=i.a.utc(l).isSameOrAfter(e);y(t),g(n)}),[l,m]);return Object(r.useEffect)((function(){N&&clearTimeout(N),S();var e=setTimeout((function(){S()}),3e4);return P(e),function(){return clearTimeout(N)}}),[n,S]),Object(r.useEffect)((function(){var t=Object(s.h)({path:"Profile/lastSeenApp",gunPointer:Object(s.g)(e),callback:function(e){f(e)}}),n=Object(s.h)({path:"Profile/lastSeenNode",gunPointer:Object(s.g)(e),callback:function(e){b(e)}});return function(){t.off(),n.off()}}),[t,e]),{isOnlineApp:j,isOnlineNode:k}}},130:function(e,t,n){"use strict";var a=n(0),r=n.n(a),c=n(32),o=n(16),i=n(33),s=(n(131),r.a.lazy((function(){return Promise.all([n.e(2),n.e(9),n.e(14)]).then(n.bind(null,270))})));t.a=function(e){var t=Object(c.b)(),n=Object(c.c)((function(e){return e.tip.modalOpen})),u=Object(a.useCallback)((function(){t(Object(o.b)())}),[t]),l=Object(a.useMemo)((function(){return r.a.createElement(i.a,{text:"Loading..."})}),[]);return n?r.a.createElement("div",{className:"modal-container"},r.a.createElement("div",{className:"modal-overlay",onClick:u}),r.a.createElement("div",{className:"modal-content"},r.a.createElement(a.Suspense,{fallback:l},r.a.createElement(s,e)))):null}},131:function(e,t,n){},276:function(e,t,n){},277:function(e,t,n){e.exports=n.p+"static/media/banner-bg.f59337b5.jpg"},278:function(e,t,n){e.exports=n.p+"static/media/lightning-logo.ea3bd789.svg"},279:function(e,t,n){},538:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n.n(a),c=n(6),o=n(8),i=n(0),s=n.n(i),u=n(32),l=n(5),f=n(112),p=n(13),d=n(16),m=n(129),b=n(1),v=n(121),O=n(33),j=(n(276),function(e){var t=e.text;return s.a.createElement("div",{className:"divider-container"},s.a.createElement("div",{className:"dash"}),s.a.createElement("p",{className:"divider-text"},t),s.a.createElement("div",{className:"dash"}))}),g=n(130),h=n(277),E=n.n(h),k=n(114),y=n.n(k),w=n(278),x=n.n(w),N=(n(279),s.a.lazy((function(){return Promise.all([n.e(0),n.e(1)]).then(n.bind(null,275))}))),P=s.a.lazy((function(){return Promise.all([n.e(0),n.e(1),n.e(12)]).then(n.bind(null,533))}));t.default=function(){var e,t=Object(u.b)(),n=Object(l.h)(),a=n.userId,h=Object(u.c)((function(e){return e.user.wall})),k=Object(u.c)((function(e){return e.user.profile})),w=Object(m.a)(a),S=w.isOnlineApp,I=w.isOnlineNode,C=Object(i.useState)(!0),A=Object(o.a)(C,2),L=(A[0],A[1]),R=Object(i.useState)(!0),U=Object(o.a)(R,2),T=U[0],K=U[1],z=Object(i.useCallback)(Object(c.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,L(!0),t(Object(p.i)()),e.next=5,t(Object(p.g)(a));case 5:L(!1),t(Object(p.e)(a)),t(Object(p.d)(a)),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0),L(!1);case 14:case"end":return e.stop()}}),e,null,[[0,10]])}))),[t,a]),q=Object(i.useCallback)(Object(c.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("Setting Loading status to:",!0),K(!0),t(Object(p.j)()),e.next=6,t(Object(p.h)(a));case 6:console.log("Setting Loading status to:",!1),K(!1),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0),console.log("Setting Loading status to:",!1),K(!1);case 15:case"end":return e.stop()}}),e,null,[[0,10]])}))),[t,a]),B=Object(i.useCallback)((function(){t(Object(d.c)({targetType:"spontaneousPayment"}))}),[t]),M=Object(i.useCallback)(Object(c.a)(r.a.mark((function e(){var a,c,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.postId,c=n.userId,o=n.type,e.next=3,z();case 3:q(),t(Object(p.c)({postId:a,publicKey:c,type:o}));case 5:case"end":return e.stop()}}),e)}))),[t,z,q,n]);Object(i.useEffect)((function(){M();var e=Object(b.h)({path:"Profile/displayName",gunPointer:Object(b.g)(a),callback:function(e){t(Object(p.k)({displayName:e}))}}),n=Object(b.h)({path:"Profile/bio",gunPointer:Object(b.g)(a),callback:function(e){t(Object(p.k)({bio:e}))}});return function(){e.off(),n.off()}}),[t,M,a]),Object(i.useEffect)((function(){Object(v.a)(h.posts.filter((function(e){return"post"===e.type})),!1)}),[h.posts]);var W=null!==(e=k.displayName)&&void 0!==e?e:k.alias,F=Object(i.useCallback)((function(e){if(e){var t,n,r=k.avatar?"data:image/png;base64,".concat(k.avatar):y.a;if("shared"===e.type)return s.a.createElement(i.Suspense,{fallback:s.a.createElement("div",{className:"post-loading"},s.a.createElement(O.a,{text:"Loading Post..."})),key:e.id},s.a.createElement(P,{postID:e.id,postPublicKey:e.originalAuthor,sharedPostId:e.id,sharedTimestamp:e.date,sharerAvatar:r,sharerPublicKey:a,sharerUsername:W,isOnlineNode:I,pinned:e.pinned}));if("post"===e.type)return s.a.createElement(i.Suspense,{fallback:s.a.createElement("div",{className:"post-loading"},s.a.createElement(O.a,{text:"Loading Post..."})),key:e.id},s.a.createElement(N,{timestamp:e.date,contentItems:e.contentItems,username:W,avatar:r,publicKey:a,page:e.page,id:e.id,tipValue:null!==(t=e.tipValue)&&void 0!==t?t:0,tipCounter:null!==(n=e.tipCounter)&&void 0!==n?n:0,isOnlineNode:I,pinned:e.pinned}))}}),[I,k.avatar,a,W]);return s.a.createElement("div",{className:"user-page"},s.a.createElement("div",{className:"top-banner",style:{backgroundImage:"url(".concat(k.header?"data:image/png;base64,".concat(k.header):E.a,")")}}),s.a.createElement("div",{className:"user-details"},s.a.createElement("div",{className:"main-av",style:{backgroundImage:"url(".concat(k.avatar?"data:image/png;base64,".concat(k.avatar):y.a,")")}}),s.a.createElement("div",{className:"details"},s.a.createElement("div",{className:"user-info"},s.a.createElement("p",{className:"username"},W),s.a.createElement("div",{className:"activity"},s.a.createElement("p",{className:"status",style:{color:S?"#01a33d":I?"#f2a900":"#888"}},S?"Active Recently":I?"Node Online":"Node Offline")),k.bio?s.a.createElement("div",{className:"desc"},s.a.createElement("p",{className:"title"},"Bio"),s.a.createElement("p",null,k.bio)):null),s.a.createElement("div",{className:"send-tip-btn",onClick:B,style:{opacity:I?1:.5,cursor:I?"pointer":"default"},"data-tip":I?null:"You can only tip users with online nodes"},s.a.createElement("img",{src:x.a,alt:"Bitcoin Lightning"}),s.a.createElement("p",null,"Send Tip")),s.a.createElement(f.a,{backgroundColor:"#3a4d67",effect:"solid"}))),s.a.createElement("div",{className:"tabs-holder"},s.a.createElement("p",{className:"tab active"},"Feed")),s.a.createElement("div",{className:"posts-holder"},F(h.pinnedPost),h.pinnedPost&&s.a.createElement(j,{text:"More Posts"}),h.posts.map(F)),T?s.a.createElement(O.a,{text:"Loading ".concat(h.page>=0?"More":"Wall"," Posts...")}):null,s.a.createElement(g.a,{publicKey:a}))}}}]);
//# sourceMappingURL=10.e158e449.chunk.js.map